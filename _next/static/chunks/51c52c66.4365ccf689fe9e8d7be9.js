"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[999],{27158:function(e,t,r){r.r(t),r.d(t,{Account:function(){return $},AddressLookupTableAccount:function(){return Rt},AddressLookupTableInstruction:function(){return Tn},AddressLookupTableProgram:function(){return Zn},Authorized:function(){return jn},BLOCKHASH_CACHE_TIMEOUT_MS:function(){return Nt},BPF_LOADER_DEPRECATED_PROGRAM_ID:function(){return Q},BPF_LOADER_PROGRAM_ID:function(){return ct},BpfLoader:function(){return lt},COMPUTE_BUDGET_INSTRUCTION_LAYOUTS:function(){return Cn},ComputeBudgetInstruction:function(){return On},ComputeBudgetProgram:function(){return Kn},Connection:function(){return Pn},Ed25519Program:function(){return zn},Enum:function(){return D},EpochSchedule:function(){return bt},FeeCalculatorLayout:function(){return Qe},Keypair:function(){return En},LAMPORTS_PER_SOL:function(){return hi},LOOKUP_TABLE_INSTRUCTION_LAYOUTS:function(){return Bn},Loader:function(){return ut},Lockup:function(){return Mn},MAX_SEED_LENGTH:function(){return H},Message:function(){return ve},MessageAccountKeys:function(){return ce},MessageV0:function(){return Se},NONCE_ACCOUNT_LENGTH:function(){return tt},NonceAccount:function(){return rt},PACKET_DATA_SIZE:function(){return ee},PUBLIC_KEY_LENGTH:function(){return F},PublicKey:function(){return Y},SIGNATURE_LENGTH_IN_BYTES:function(){return re},SOLANA_SCHEMA:function(){return V},STAKE_CONFIG_ID:function(){return qn},STAKE_INSTRUCTION_LAYOUTS:function(){return Dn},SYSTEM_INSTRUCTION_LAYOUTS:function(){return at},SYSVAR_CLOCK_PUBKEY:function(){return We},SYSVAR_EPOCH_SCHEDULE_PUBKEY:function(){return Ne},SYSVAR_INSTRUCTIONS_PUBKEY:function(){return Ue},SYSVAR_RECENT_BLOCKHASHES_PUBKEY:function(){return qe},SYSVAR_RENT_PUBKEY:function(){return je},SYSVAR_REWARDS_PUBKEY:function(){return Me},SYSVAR_SLOT_HASHES_PUBKEY:function(){return Ge},SYSVAR_SLOT_HISTORY_PUBKEY:function(){return De},SYSVAR_STAKE_HISTORY_PUBKEY:function(){return Ve},Secp256k1Program:function(){return Un},SendTransactionError:function(){return mt},SolanaJSONRPCError:function(){return wt},SolanaJSONRPCErrorCode:function(){return vt},StakeAuthorizationLayout:function(){return Vn},StakeInstruction:function(){return Gn},StakeProgram:function(){return Jn},Struct:function(){return G},SystemInstruction:function(){return it},SystemProgram:function(){return ot},Transaction:function(){return Te},TransactionExpiredBlockheightExceededError:function(){return ie},TransactionExpiredNonceInvalidError:function(){return oe},TransactionExpiredTimeoutError:function(){return ae},TransactionInstruction:function(){return Be},TransactionMessage:function(){return Ce},TransactionStatus:function(){return Pe},VALIDATOR_INFO_KEY:function(){return Qn},VERSION_PREFIX_MASK:function(){return te},VOTE_PROGRAM_ID:function(){return ri},ValidatorInfo:function(){return ti},VersionedMessage:function(){return Ie},VersionedTransaction:function(){return ze},VoteAccount:function(){return ii},VoteAuthorizationLayout:function(){return Yn},VoteInit:function(){return Hn},VoteInstruction:function(){return Fn},VoteProgram:function(){return $n},clusterApiUrl:function(){return ci},sendAndConfirmRawTransaction:function(){return li},sendAndConfirmTransaction:function(){return Je}});var n=r(9249),i=r(87371),a=r(48834),o=r(7201),s=r(34795),u=r(45754),c=r(11987),l=r(95058),d=r(82841),h=r.n(d),f=r(62197),p=r.n(f),y=r(17022),k=r.n(y),b=r(53929),g=r(32123),m=r(96346),v=r(96234),w=r(41528),x=r(56666),S=r(68079),I=r(86522),_=r(59740),A=r(50974),R=r(87414),P=r.n(R),E=r(25991),B=r(93069),T=r(98904),Z=r(380),O=r(48796),C=r(66481),K=o.UN.utils.randomPrivateKey,L=function(){var e=o.UN.utils.randomPrivateKey(),t=z(e),r=new Uint8Array(64);return r.set(e),r.set(t,32),{publicKey:t,secretKey:r}},z=o.UN.getPublicKey;function W(e){try{return o.UN.ExtendedPoint.fromHex(e),!0}catch(t){return!1}}var N=function(e,t){return o.UN.sign(e,t.slice(0,32))},U=o.UN.verify,q=function(e){return a.Buffer.isBuffer(e)?e:e instanceof Uint8Array?a.Buffer.from(e.buffer,e.byteOffset,e.byteLength):a.Buffer.from(e)};function j(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,l.Z)(e);if(t){var i=(0,l.Z)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,c.Z)(this,r)}}var M,G=function(){function e(t){(0,n.Z)(this,e),Object.assign(this,t)}return(0,i.Z)(e,[{key:"encode",value:function(){return a.Buffer.from((0,g.serialize)(V,this))}}],[{key:"decode",value:function(e){return(0,g.deserialize)(V,this,e)}},{key:"decodeUnchecked",value:function(e){return(0,g.deserializeUnchecked)(V,this,e)}}]),e}(),D=function(e){(0,u.Z)(r,e);var t=j(r);function r(e){var i;if((0,n.Z)(this,r),(i=t.call(this,e)).enum="",1!==Object.keys(e).length)throw new Error("Enum can only take single value");return Object.keys(e).map((function(e){i.enum=e})),i}return(0,i.Z)(r)}(G),V=new Map;function J(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,l.Z)(e);if(t){var i=(0,l.Z)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,c.Z)(this,r)}}var H=32,F=32;var X=1;M=Symbol.toStringTag;var Y=function(e){(0,u.Z)(r,e);var t=J(r);function r(e){var i;if((0,n.Z)(this,r),(i=t.call(this,{}))._bn=void 0,function(e){return void 0!==e._bn}(e))i._bn=e._bn;else{if("string"===typeof e){var a=k().decode(e);if(a.length!=F)throw new Error("Invalid public key input");i._bn=new(p())(a)}else i._bn=new(p())(e);if(i._bn.byteLength()>F)throw new Error("Invalid public key input")}return i}return(0,i.Z)(r,[{key:"equals",value:function(e){return this._bn.eq(e._bn)}},{key:"toBase58",value:function(){return k().encode(this.toBytes())}},{key:"toJSON",value:function(){return this.toBase58()}},{key:"toBytes",value:function(){var e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}},{key:"toBuffer",value:function(){var e=this._bn.toArrayLike(a.Buffer);if(e.length===F)return e;var t=a.Buffer.alloc(32);return e.copy(t,32-e.length),t}},{key:M,get:function(){return"PublicKey(".concat(this.toString(),")")}},{key:"toString",value:function(){return this.toBase58()}}],[{key:"unique",value:function(){var e=new r(X);return X+=1,new r(e.toBuffer())}},{key:"createWithSeed",value:function(){var e=(0,s.Z)(h().mark((function e(t,n,i){var o,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=a.Buffer.concat([t.toBuffer(),a.Buffer.from(n),i.toBuffer()]),s=(0,b.J)(o),e.abrupt("return",new r(s));case 3:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"createProgramAddressSync",value:function(e,t){var n=a.Buffer.alloc(0);e.forEach((function(e){if(e.length>H)throw new TypeError("Max seed length exceeded");n=a.Buffer.concat([n,q(e)])})),n=a.Buffer.concat([n,t.toBuffer(),a.Buffer.from("ProgramDerivedAddress")]);var i=(0,b.J)(n);if(W(i))throw new Error("Invalid seeds, address must fall off the curve");return new r(i)}},{key:"createProgramAddress",value:function(){var e=(0,s.Z)(h().mark((function e(t,r){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.createProgramAddressSync(t,r));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"findProgramAddressSync",value:function(e,t){for(var r,n=255;0!=n;){try{var i=e.concat(a.Buffer.from([n]));r=this.createProgramAddressSync(i,t)}catch(o){if(o instanceof TypeError)throw o;n--;continue}return[r,n]}throw new Error("Unable to find a viable program address nonce")}},{key:"findProgramAddress",value:function(){var e=(0,s.Z)(h().mark((function e(t,r){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.findProgramAddressSync(t,r));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"isOnCurve",value:function(e){return W(new r(e).toBytes())}}]),r}(G);Y.default=new Y("11111111111111111111111111111111"),V.set(Y,{kind:"struct",fields:[["_bn","u256"]]});var $=function(){function e(t){if((0,n.Z)(this,e),this._publicKey=void 0,this._secretKey=void 0,t){var r=q(t);if(64!==t.length)throw new Error("bad secret key size");this._publicKey=r.slice(32,64),this._secretKey=r.slice(0,32)}else this._secretKey=q(K()),this._publicKey=q(z(this._secretKey))}return(0,i.Z)(e,[{key:"publicKey",get:function(){return new Y(this._publicKey)}},{key:"secretKey",get:function(){return a.Buffer.concat([this._secretKey,this._publicKey],64)}}]),e}(),Q=new Y("BPFLoader1111111111111111111111111111111111"),ee=1232,te=127,re=64;function ne(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,l.Z)(e);if(t){var i=(0,l.Z)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,c.Z)(this,r)}}var ie=function(e){(0,u.Z)(r,e);var t=ne(r);function r(e){var i;return(0,n.Z)(this,r),(i=t.call(this,"Signature ".concat(e," has expired: block height exceeded."))).signature=void 0,i.signature=e,i}return(0,i.Z)(r)}((0,E.Z)(Error));Object.defineProperty(ie.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});var ae=function(e){(0,u.Z)(r,e);var t=ne(r);function r(e,i){var a;return(0,n.Z)(this,r),(a=t.call(this,"Transaction was not confirmed in ".concat(i.toFixed(2)," seconds. It is ")+"unknown if it succeeded or failed. Check signature "+"".concat(e," using the Solana Explorer or CLI tools."))).signature=void 0,a.signature=e,a}return(0,i.Z)(r)}((0,E.Z)(Error));Object.defineProperty(ae.prototype,"name",{value:"TransactionExpiredTimeoutError"});var oe=function(e){(0,u.Z)(r,e);var t=ne(r);function r(e){var i;return(0,n.Z)(this,r),(i=t.call(this,"Signature ".concat(e," has expired: the nonce is no longer valid."))).signature=void 0,i.signature=e,i}return(0,i.Z)(r)}((0,E.Z)(Error));function se(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return ue(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ue(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw a}}}}function ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Object.defineProperty(oe.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});var ce=function(){function e(t,r){(0,n.Z)(this,e),this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=t,this.accountKeysFromLookups=r}return(0,i.Z)(e,[{key:"keySegments",value:function(){var e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}},{key:"get",value:function(e){var t,r=se(this.keySegments());try{for(r.s();!(t=r.n()).done;){var n=t.value;if(e<n.length)return n[e];e-=n.length}}catch(i){r.e(i)}finally{r.f()}}},{key:"length",get:function(){return this.keySegments().flat().length}},{key:"compileInstructions",value:function(e){if(this.length>256)throw new Error("Account index overflow encountered during compilation");var t=new Map;this.keySegments().flat().forEach((function(e,r){t.set(e.toBase58(),r)}));var r=function(e){var r=t.get(e.toBase58());if(void 0===r)throw new Error("Encountered an unknown instruction account key during compilation");return r};return e.map((function(e){return{programIdIndex:r(e.programId),accountKeyIndexes:e.keys.map((function(e){return r(e.pubkey)})),data:e.data}}))}}]),e}(),le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"publicKey";return m.Ik(32,e)},de=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"signature";return m.Ik(64,e)},he=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"string",t=m.n_([m.Jq("length"),m.Jq("lengthPadding"),m.Ik(m.cv(m.Jq(),-8),"chars")],e),r=t.decode.bind(t),n=t.encode.bind(t),i=t;return i.decode=function(e,t){return r(e,t).chars.toString()},i.encode=function(e,t,r){var i={chars:a.Buffer.from(e,"utf8")};return n(i,t,r)},i.alloc=function(e){return m.Jq().span+m.Jq().span+a.Buffer.from(e,"utf8").length},i};function fe(e,t){var r=function e(r){if(r.span>=0)return r.span;if("function"===typeof r.alloc)return r.alloc(t[r.property]);if("count"in r&&"elementLayout"in r){var n=t[r.property];if(Array.isArray(n))return n.length*e(r.elementLayout)}else if("fields"in r)return fe({layout:r},t[r.property]);return 0},n=0;return e.layout.fields.forEach((function(e){n+=r(e)})),n}function pe(e){for(var t=0,r=0;;){var n=e.shift();if(t|=(127&n)<<7*r,r+=1,0===(128&n))break}return t}function ye(e,t){for(var r=t;;){var n=127&r;if(0==(r>>=7)){e.push(n);break}n|=128,e.push(n)}}function ke(e,t){if(!e)throw new Error(t||"Assertion failed")}function be(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return ge(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ge(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw a}}}}function ge(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var me=function(){function e(t,r){(0,n.Z)(this,e),this.payer=void 0,this.keyMetaMap=void 0,this.payer=t,this.keyMetaMap=r}return(0,i.Z)(e,[{key:"getMessageComponents",value:function(){var e=(0,S.Z)(this.keyMetaMap.entries());ke(e.length<=256,"Max static account keys length exceeded");var t=e.filter((function(e){var t=(0,v.Z)(e,2)[1];return t.isSigner&&t.isWritable})),r=e.filter((function(e){var t=(0,v.Z)(e,2)[1];return t.isSigner&&!t.isWritable})),n=e.filter((function(e){var t=(0,v.Z)(e,2)[1];return!t.isSigner&&t.isWritable})),i=e.filter((function(e){var t=(0,v.Z)(e,2)[1];return!t.isSigner&&!t.isWritable})),a={numRequiredSignatures:t.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:i.length};return ke(t.length>0,"Expected at least one writable signer key"),ke((0,v.Z)(t[0],1)[0]===this.payer.toBase58(),"Expected first writable signer key to be the fee payer"),[a,[].concat((0,S.Z)(t.map((function(e){var t=(0,v.Z)(e,1)[0];return new Y(t)}))),(0,S.Z)(r.map((function(e){var t=(0,v.Z)(e,1)[0];return new Y(t)}))),(0,S.Z)(n.map((function(e){var t=(0,v.Z)(e,1)[0];return new Y(t)}))),(0,S.Z)(i.map((function(e){var t=(0,v.Z)(e,1)[0];return new Y(t)}))))]}},{key:"extractTableLookup",value:function(e){var t=this.drainKeysFoundInLookupTable(e.state.addresses,(function(e){return!e.isSigner&&!e.isInvoked&&e.isWritable})),r=(0,v.Z)(t,2),n=r[0],i=r[1],a=this.drainKeysFoundInLookupTable(e.state.addresses,(function(e){return!e.isSigner&&!e.isInvoked&&!e.isWritable})),o=(0,v.Z)(a,2),s=o[0],u=o[1];if(0!==n.length||0!==s.length)return[{accountKey:e.key,writableIndexes:n,readonlyIndexes:s},{writable:i,readonly:u}]}},{key:"drainKeysFoundInLookupTable",value:function(e,t){var r,n=this,i=new Array,a=new Array,o=be(this.keyMetaMap.entries());try{var s=function(){var o=(0,v.Z)(r.value,2),s=o[0],u=o[1];if(t(u)){var c=new Y(s),l=e.findIndex((function(e){return e.equals(c)}));l>=0&&(ke(l<256,"Max lookup table index exceeded"),i.push(l),a.push(c),n.keyMetaMap.delete(s))}};for(o.s();!(r=o.n()).done;)s()}catch(u){o.e(u)}finally{o.f()}return[i,a]}}],[{key:"compile",value:function(t,r){var n=new Map,i=function(e){var t=e.toBase58(),r=n.get(t);return void 0===r&&(r={isSigner:!1,isWritable:!1,isInvoked:!1},n.set(t,r)),r},a=i(r);a.isSigner=!0,a.isWritable=!0;var o,s=be(t);try{for(s.s();!(o=s.n()).done;){var u=o.value;i(u.programId).isInvoked=!0;var c,l=be(u.keys);try{for(l.s();!(c=l.n()).done;){var d=c.value,h=i(d.pubkey);h.isSigner||(h.isSigner=d.isSigner),h.isWritable||(h.isWritable=d.isWritable)}}catch(f){l.e(f)}finally{l.f()}}}catch(f){s.e(f)}finally{s.f()}return new e(r,n)}}]),e}(),ve=function(){function e(t){var r=this;(0,n.Z)(this,e),this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=t.header,this.accountKeys=t.accountKeys.map((function(e){return new Y(e)})),this.recentBlockhash=t.recentBlockhash,this.instructions=t.instructions,this.instructions.forEach((function(e){return r.indexToProgramIds.set(e.programIdIndex,r.accountKeys[e.programIdIndex])}))}return(0,i.Z)(e,[{key:"version",get:function(){return"legacy"}},{key:"staticAccountKeys",get:function(){return this.accountKeys}},{key:"compiledInstructions",get:function(){return this.instructions.map((function(e){return{programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:k().decode(e.data)}}))}},{key:"addressTableLookups",get:function(){return[]}},{key:"getAccountKeys",value:function(){return new ce(this.staticAccountKeys)}},{key:"isAccountSigner",value:function(e){return e<this.header.numRequiredSignatures}},{key:"isAccountWritable",value:function(e){var t=this.header.numRequiredSignatures;return e>=this.header.numRequiredSignatures?e-t<this.accountKeys.length-t-this.header.numReadonlyUnsignedAccounts:e<t-this.header.numReadonlySignedAccounts}},{key:"isProgramId",value:function(e){return this.indexToProgramIds.has(e)}},{key:"programIds",value:function(){return(0,S.Z)(this.indexToProgramIds.values())}},{key:"nonProgramIds",value:function(){var e=this;return this.accountKeys.filter((function(t,r){return!e.isProgramId(r)}))}},{key:"serialize",value:function(){var e=this.accountKeys.length,t=[];ye(t,e);var r=this.instructions.map((function(e){var t=e.accounts,r=e.programIdIndex,n=Array.from(k().decode(e.data)),i=[];ye(i,t.length);var o=[];return ye(o,n.length),{programIdIndex:r,keyIndicesCount:a.Buffer.from(i),keyIndices:t,dataLength:a.Buffer.from(o),data:n}})),n=[];ye(n,r.length);var i=a.Buffer.alloc(ee);a.Buffer.from(n).copy(i);var o=n.length;r.forEach((function(e){var t=m.n_([m.u8("programIdIndex"),m.Ik(e.keyIndicesCount.length,"keyIndicesCount"),m.A9(m.u8("keyIndex"),e.keyIndices.length,"keyIndices"),m.Ik(e.dataLength.length,"dataLength"),m.A9(m.u8("userdatum"),e.data.length,"data")]).encode(e,i,o);o+=t})),i=i.slice(0,o);var s=m.n_([m.Ik(1,"numRequiredSignatures"),m.Ik(1,"numReadonlySignedAccounts"),m.Ik(1,"numReadonlyUnsignedAccounts"),m.Ik(t.length,"keyCount"),m.A9(le("key"),e,"keys"),le("recentBlockhash")]),u={numRequiredSignatures:a.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:a.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:a.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:a.Buffer.from(t),keys:this.accountKeys.map((function(e){return q(e.toBytes())})),recentBlockhash:k().decode(this.recentBlockhash)},c=a.Buffer.alloc(2048),l=s.encode(u,c);return i.copy(c,l),c.slice(0,l+i.length)}}],[{key:"compile",value:function(t){var r=me.compile(t.instructions,t.payerKey).getMessageComponents(),n=(0,v.Z)(r,2),i=n[0],a=n[1],o=new ce(a).compileInstructions(t.instructions).map((function(e){return{programIdIndex:e.programIdIndex,accounts:e.accountKeyIndexes,data:k().encode(e.data)}}));return new e({header:i,accountKeys:a,recentBlockhash:t.recentBlockhash,instructions:o})}},{key:"from",value:function(t){var r=(0,S.Z)(t),n=r.shift();if(n!==(n&te))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");for(var i=r.shift(),o=r.shift(),s=pe(r),u=[],c=0;c<s;c++){var l=r.slice(0,F);r=r.slice(F),u.push(new Y(a.Buffer.from(l)))}for(var d=r.slice(0,F),h=pe(r=r.slice(F)),f=[],p=0;p<h;p++){var y=r.shift(),b=pe(r),g=r.slice(0,b),m=pe(r=r.slice(b)),v=r.slice(0,m),w=k().encode(a.Buffer.from(v));r=r.slice(m),f.push({programIdIndex:y,accounts:g,data:w})}return new e({header:{numRequiredSignatures:n,numReadonlySignedAccounts:i,numReadonlyUnsignedAccounts:o},recentBlockhash:k().encode(a.Buffer.from(d)),accountKeys:u,instructions:f})}}]),e}();function we(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return xe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xe(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw a}}}}function xe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Se=function(){function e(t){(0,n.Z)(this,e),this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=t.header,this.staticAccountKeys=t.staticAccountKeys,this.recentBlockhash=t.recentBlockhash,this.compiledInstructions=t.compiledInstructions,this.addressTableLookups=t.addressTableLookups}return(0,i.Z)(e,[{key:"version",get:function(){return 0}},{key:"numAccountKeysFromLookups",get:function(){var e,t=0,r=we(this.addressTableLookups);try{for(r.s();!(e=r.n()).done;){var n=e.value;t+=n.readonlyIndexes.length+n.writableIndexes.length}}catch(i){r.e(i)}finally{r.f()}return t}},{key:"getAccountKeys",value:function(e){var t;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");t=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)t=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new ce(this.staticAccountKeys,t)}},{key:"isAccountSigner",value:function(e){return e<this.header.numRequiredSignatures}},{key:"isAccountWritable",value:function(e){var t=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;return e>=r?e-r<this.addressTableLookups.reduce((function(e,t){return e+t.writableIndexes.length}),0):e>=this.header.numRequiredSignatures?e-t<r-t-this.header.numReadonlyUnsignedAccounts:e<t-this.header.numReadonlySignedAccounts}},{key:"resolveAddressTableLookups",value:function(e){var t,r={writable:[],readonly:[]},n=we(this.addressTableLookups);try{var i=function(){var n=t.value,i=e.find((function(e){return e.key.equals(n.accountKey)}));if(!i)throw new Error("Failed to find address lookup table account for table key ".concat(n.accountKey.toBase58()));var a,o=we(n.writableIndexes);try{for(o.s();!(a=o.n()).done;){var s=a.value;if(!(s<i.state.addresses.length))throw new Error("Failed to find address for index ".concat(s," in address lookup table ").concat(n.accountKey.toBase58()));r.writable.push(i.state.addresses[s])}}catch(d){o.e(d)}finally{o.f()}var u,c=we(n.readonlyIndexes);try{for(c.s();!(u=c.n()).done;){var l=u.value;if(!(l<i.state.addresses.length))throw new Error("Failed to find address for index ".concat(l," in address lookup table ").concat(n.accountKey.toBase58()));r.readonly.push(i.state.addresses[l])}}catch(d){c.e(d)}finally{c.f()}};for(n.s();!(t=n.n()).done;)i()}catch(a){n.e(a)}finally{n.f()}return r}},{key:"serialize",value:function(){var e=Array();ye(e,this.staticAccountKeys.length);var t=this.serializeInstructions(),r=Array();ye(r,this.compiledInstructions.length);var n=this.serializeAddressTableLookups(),i=Array();ye(i,this.addressTableLookups.length);var a=m.n_([m.u8("prefix"),m.n_([m.u8("numRequiredSignatures"),m.u8("numReadonlySignedAccounts"),m.u8("numReadonlyUnsignedAccounts")],"header"),m.Ik(e.length,"staticAccountKeysLength"),m.A9(le(),this.staticAccountKeys.length,"staticAccountKeys"),le("recentBlockhash"),m.Ik(r.length,"instructionsLength"),m.Ik(t.length,"serializedInstructions"),m.Ik(i.length,"addressTableLookupsLength"),m.Ik(n.length,"serializedAddressTableLookups")]),o=new Uint8Array(ee),s=a.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map((function(e){return e.toBytes()})),recentBlockhash:k().decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:t,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:n},o);return o.slice(0,s)}},{key:"serializeInstructions",value:function(){var e,t=0,r=new Uint8Array(ee),n=we(this.compiledInstructions);try{for(n.s();!(e=n.n()).done;){var i=e.value,a=Array();ye(a,i.accountKeyIndexes.length);var o=Array();ye(o,i.data.length),t+=m.n_([m.u8("programIdIndex"),m.Ik(a.length,"encodedAccountKeyIndexesLength"),m.A9(m.u8(),i.accountKeyIndexes.length,"accountKeyIndexes"),m.Ik(o.length,"encodedDataLength"),m.Ik(i.data.length,"data")]).encode({programIdIndex:i.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(a),accountKeyIndexes:i.accountKeyIndexes,encodedDataLength:new Uint8Array(o),data:i.data},r,t)}}catch(s){n.e(s)}finally{n.f()}return r.slice(0,t)}},{key:"serializeAddressTableLookups",value:function(){var e,t=0,r=new Uint8Array(ee),n=we(this.addressTableLookups);try{for(n.s();!(e=n.n()).done;){var i=e.value,a=Array();ye(a,i.writableIndexes.length);var o=Array();ye(o,i.readonlyIndexes.length),t+=m.n_([le("accountKey"),m.Ik(a.length,"encodedWritableIndexesLength"),m.A9(m.u8(),i.writableIndexes.length,"writableIndexes"),m.Ik(o.length,"encodedReadonlyIndexesLength"),m.A9(m.u8(),i.readonlyIndexes.length,"readonlyIndexes")]).encode({accountKey:i.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(a),writableIndexes:i.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(o),readonlyIndexes:i.readonlyIndexes},r,t)}}catch(s){n.e(s)}finally{n.f()}return r.slice(0,t)}}],[{key:"compile",value:function(t){var r,n=me.compile(t.instructions,t.payerKey),i=new Array,a={writable:new Array,readonly:new Array},o=we(t.addressLookupTableAccounts||[]);try{for(o.s();!(r=o.n()).done;){var s=r.value,u=n.extractTableLookup(s);if(void 0!==u){var c,l,d=(0,v.Z)(u,2),h=d[0],f=d[1],p=f.writable,y=f.readonly;i.push(h),(c=a.writable).push.apply(c,(0,S.Z)(p)),(l=a.readonly).push.apply(l,(0,S.Z)(y))}}}catch(x){o.e(x)}finally{o.f()}var k=n.getMessageComponents(),b=(0,v.Z)(k,2),g=b[0],m=b[1],w=new ce(m,a).compileInstructions(t.instructions);return new e({header:g,staticAccountKeys:m,recentBlockhash:t.recentBlockhash,compiledInstructions:w,addressTableLookups:i})}},{key:"deserialize",value:function(t){var r=(0,S.Z)(t),n=r.shift(),i=n&te;ke(n!==i,"Expected versioned message but received legacy message");ke(0===i,"Expected versioned message with version 0 but found version ".concat(i));for(var a={numRequiredSignatures:r.shift(),numReadonlySignedAccounts:r.shift(),numReadonlyUnsignedAccounts:r.shift()},o=[],s=pe(r),u=0;u<s;u++)o.push(new Y(r.splice(0,F)));for(var c=k().encode(r.splice(0,F)),l=pe(r),d=[],h=0;h<l;h++){var f=r.shift(),p=pe(r),y=r.splice(0,p),b=pe(r),g=new Uint8Array(r.splice(0,b));d.push({programIdIndex:f,accountKeyIndexes:y,data:g})}for(var m=pe(r),v=[],w=0;w<m;w++){var x=new Y(r.splice(0,F)),I=pe(r),_=r.splice(0,I),A=pe(r),R=r.splice(0,A);v.push({accountKey:x,writableIndexes:_,readonlyIndexes:R})}return new e({header:a,staticAccountKeys:o,recentBlockhash:c,compiledInstructions:d,addressTableLookups:v})}}]),e}(),Ie={deserializeMessageVersion:function(e){var t=e[0],r=t&te;return r===t?"legacy":r},deserialize:function(e){var t=Ie.deserializeMessageVersion(e);if("legacy"===t)return ve.from(e);if(0===t)return Se.deserialize(e);throw new Error("Transaction message version ".concat(t," deserialization is not supported"))}};function _e(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return Ae(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ae(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw a}}}}function Ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Re(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var Pe=function(e){return e[e.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",e[e.PROCESSED=1]="PROCESSED",e[e.TIMED_OUT=2]="TIMED_OUT",e[e.NONCE_INVALID=3]="NONCE_INVALID",e}({}),Ee=a.Buffer.alloc(re).fill(0),Be=function(){function e(t){(0,n.Z)(this,e),this.keys=void 0,this.programId=void 0,this.data=a.Buffer.alloc(0),this.programId=t.programId,this.keys=t.keys,t.data&&(this.data=t.data)}return(0,i.Z)(e,[{key:"toJSON",value:function(){return{keys:this.keys.map((function(e){var t=e.pubkey,r=e.isSigner,n=e.isWritable;return{pubkey:t.toJSON(),isSigner:r,isWritable:n}})),programId:this.programId.toJSON(),data:(0,S.Z)(this.data)}}}]),e}(),Te=function(){function e(t){if((0,n.Z)(this,e),this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,t)if(t.feePayer&&(this.feePayer=t.feePayer),t.signatures&&(this.signatures=t.signatures),Object.prototype.hasOwnProperty.call(t,"nonceInfo")){var r=t,i=r.minContextSlot,a=r.nonceInfo;this.minNonceContextSlot=i,this.nonceInfo=a}else if(Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")){var o=t,s=o.blockhash,u=o.lastValidBlockHeight;this.recentBlockhash=s,this.lastValidBlockHeight=u}else{var c=t,l=c.recentBlockhash,d=c.nonceInfo;d&&(this.nonceInfo=d),this.recentBlockhash=l}}return(0,i.Z)(e,[{key:"signature",get:function(){return this.signatures.length>0?this.signatures[0].signature:null}},{key:"toJSON",value:function(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map((function(e){return e.toJSON()})),signers:this.signatures.map((function(e){return e.publicKey.toJSON()}))}}},{key:"add",value:function(){for(var e=this,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(0===r.length)throw new Error("No instructions");return r.forEach((function(t){"instructions"in t?e.instructions=e.instructions.concat(t.instructions):"data"in t&&"programId"in t&&"keys"in t?e.instructions.push(t):e.instructions.push(new Be(t))})),this}},{key:"compileMessage",value:function(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;var e,t,r;if(this.nonceInfo?(e=this.nonceInfo.nonce,t=this.instructions[0]!=this.nonceInfo.nonceInstruction?[this.nonceInfo.nonceInstruction].concat((0,S.Z)(this.instructions)):this.instructions):(e=this.recentBlockhash,t=this.instructions),!e)throw new Error("Transaction recentBlockhash required");if(t.length<1&&console.warn("No instructions provided"),this.feePayer)r=this.feePayer;else{if(!(this.signatures.length>0&&this.signatures[0].publicKey))throw new Error("Transaction fee payer required");r=this.signatures[0].publicKey}for(var n=0;n<t.length;n++)if(void 0===t[n].programId)throw new Error("Transaction instruction index ".concat(n," has undefined program id"));var i=[],a=[];t.forEach((function(e){e.keys.forEach((function(e){a.push(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Re(Object(r),!0).forEach((function(t){(0,x.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Re(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e))}));var t=e.programId.toString();i.includes(t)||i.push(t)})),i.forEach((function(e){a.push({pubkey:new Y(e),isSigner:!1,isWritable:!1})}));var o=[];a.forEach((function(e){var t=e.pubkey.toString(),r=o.findIndex((function(e){return e.pubkey.toString()===t}));r>-1?(o[r].isWritable=o[r].isWritable||e.isWritable,o[r].isSigner=o[r].isSigner||e.isSigner):o.push(e)})),o.sort((function(e,t){if(e.isSigner!==t.isSigner)return e.isSigner?-1:1;if(e.isWritable!==t.isWritable)return e.isWritable?-1:1;return e.pubkey.toBase58().localeCompare(t.pubkey.toBase58(),"en",{localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"})}));var s=o.findIndex((function(e){return e.pubkey.equals(r)}));if(s>-1){var u=o.splice(s,1),c=(0,v.Z)(u,1)[0];c.isSigner=!0,c.isWritable=!0,o.unshift(c)}else o.unshift({pubkey:r,isSigner:!0,isWritable:!0});var l,d=_e(this.signatures);try{var h=function(){var e=l.value,t=o.findIndex((function(t){return t.pubkey.equals(e.publicKey)}));if(!(t>-1))throw new Error("unknown signer: ".concat(e.publicKey.toString()));o[t].isSigner||(o[t].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."))};for(d.s();!(l=d.n()).done;)h()}catch(I){d.e(I)}finally{d.f()}var f=0,p=0,y=0,b=[],g=[];o.forEach((function(e){var t=e.pubkey,r=e.isSigner,n=e.isWritable;r?(b.push(t.toString()),f+=1,n||(p+=1)):(g.push(t.toString()),n||(y+=1))}));var m=b.concat(g),w=t.map((function(e){var t=e.data,r=e.programId;return{programIdIndex:m.indexOf(r.toString()),accounts:e.keys.map((function(e){return m.indexOf(e.pubkey.toString())})),data:k().encode(t)}}));return w.forEach((function(e){ke(e.programIdIndex>=0),e.accounts.forEach((function(e){return ke(e>=0)}))})),new ve({header:{numRequiredSignatures:f,numReadonlySignedAccounts:p,numReadonlyUnsignedAccounts:y},accountKeys:m,recentBlockhash:e,instructions:w})}},{key:"_compile",value:function(){var e=this.compileMessage(),t=e.accountKeys.slice(0,e.header.numRequiredSignatures);if(this.signatures.length===t.length&&this.signatures.every((function(e,r){return t[r].equals(e.publicKey)})))return e;return this.signatures=t.map((function(e){return{signature:null,publicKey:e}})),e}},{key:"serializeMessage",value:function(){return this._compile().serialize()}},{key:"getEstimatedFee",value:function(){var e=(0,s.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getFeeForMessage(this.compileMessage());case 2:return e.abrupt("return",e.sent.value);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setSigners",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(0===t.length)throw new Error("No signers");var n=new Set;this.signatures=t.filter((function(e){var t=e.toString();return!n.has(t)&&(n.add(t),!0)})).map((function(e){return{signature:null,publicKey:e}}))}},{key:"sign",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(0===t.length)throw new Error("No signers");for(var n=new Set,i=[],a=0,o=t;a<o.length;a++){var s=o[a],u=s.publicKey.toString();n.has(u)||(n.add(u),i.push(s))}this.signatures=i.map((function(e){return{signature:null,publicKey:e.publicKey}}));var c=this._compile();this._partialSign.apply(this,[c].concat(i))}},{key:"partialSign",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(0===t.length)throw new Error("No signers");for(var n=new Set,i=[],a=0,o=t;a<o.length;a++){var s=o[a],u=s.publicKey.toString();n.has(u)||(n.add(u),i.push(s))}var c=this._compile();this._partialSign.apply(this,[c].concat(i))}},{key:"_partialSign",value:function(e){for(var t=this,r=e.serialize(),n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];i.forEach((function(e){var n=N(r,e.secretKey);t._addSignature(e.publicKey,q(n))}))}},{key:"addSignature",value:function(e,t){this._compile(),this._addSignature(e,t)}},{key:"_addSignature",value:function(e,t){ke(64===t.length);var r=this.signatures.findIndex((function(t){return e.equals(t.publicKey)}));if(r<0)throw new Error("unknown signer: ".concat(e.toString()));this.signatures[r].signature=a.Buffer.from(t)}},{key:"verifySignatures",value:function(e){return this._verifySignatures(this.serializeMessage(),void 0===e||e)}},{key:"_verifySignatures",value:function(e,t){var r,n=_e(this.signatures);try{for(n.s();!(r=n.n()).done;){var i=r.value,a=i.signature,o=i.publicKey;if(null===a){if(t)return!1}else if(!U(a,e,o.toBytes()))return!1}}catch(s){n.e(s)}finally{n.f()}return!0}},{key:"serialize",value:function(e){var t=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),r=t.requireAllSignatures,n=t.verifySignatures,i=this.serializeMessage();if(n&&!this._verifySignatures(i,r))throw new Error("Signature verification failed");return this._serialize(i)}},{key:"_serialize",value:function(e){var t=this.signatures,r=[];ye(r,t.length);var n=r.length+64*t.length+e.length,i=a.Buffer.alloc(n);return ke(t.length<256),a.Buffer.from(r).copy(i,0),t.forEach((function(e,t){var n=e.signature;null!==n&&(ke(64===n.length,"signature has invalid length"),a.Buffer.from(n).copy(i,r.length+64*t))})),e.copy(i,r.length+64*t.length),ke(i.length<=ee,"Transaction too large: ".concat(i.length," > ").concat(ee)),i}},{key:"keys",get:function(){return ke(1===this.instructions.length),this.instructions[0].keys.map((function(e){return e.pubkey}))}},{key:"programId",get:function(){return ke(1===this.instructions.length),this.instructions[0].programId}},{key:"data",get:function(){return ke(1===this.instructions.length),this.instructions[0].data}}],[{key:"from",value:function(t){for(var r=(0,S.Z)(t),n=pe(r),i=[],o=0;o<n;o++){var s=r.slice(0,re);r=r.slice(re),i.push(k().encode(a.Buffer.from(s)))}return e.populate(ve.from(r),i)}},{key:"populate",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=new e;return n.recentBlockhash=t.recentBlockhash,t.header.numRequiredSignatures>0&&(n.feePayer=t.accountKeys[0]),r.forEach((function(e,r){var i={signature:e==k().encode(Ee)?null:k().decode(e),publicKey:t.accountKeys[r]};n.signatures.push(i)})),t.instructions.forEach((function(e){var r=e.accounts.map((function(e){var r=t.accountKeys[e];return{pubkey:r,isSigner:n.signatures.some((function(e){return e.publicKey.toString()===r.toString()}))||t.isAccountSigner(e),isWritable:t.isAccountWritable(e)}}));n.instructions.push(new Be({keys:r,programId:t.accountKeys[e.programIdIndex],data:k().decode(e.data)}))})),n._message=t,n._json=n.toJSON(),n}}]),e}();function Ze(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return Oe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Oe(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw a}}}}function Oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ce=function(){function e(t){(0,n.Z)(this,e),this.payerKey=void 0,this.instructions=void 0,this.recentBlockhash=void 0,this.payerKey=t.payerKey,this.instructions=t.instructions,this.recentBlockhash=t.recentBlockhash}return(0,i.Z)(e,[{key:"compileToLegacyMessage",value:function(){return ve.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions})}},{key:"compileToV0Message",value:function(e){return Se.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions,addressLookupTableAccounts:e})}}],[{key:"decompile",value:function(t,r){var n=t.header,i=t.compiledInstructions,a=t.recentBlockhash,o=n.numRequiredSignatures,s=n.numReadonlySignedAccounts,u=n.numReadonlyUnsignedAccounts,c=o-s;ke(c>0,"Message header is invalid");var l=t.staticAccountKeys.length-o-u;ke(l>=0,"Message header is invalid");var d=t.getAccountKeys(r),h=d.get(0);if(void 0===h)throw new Error("Failed to decompile message because no account keys were found");var f,p=[],y=Ze(i);try{for(y.s();!(f=y.n()).done;){var k,b=f.value,g=[],m=Ze(b.accountKeyIndexes);try{for(m.s();!(k=m.n()).done;){var v=k.value,w=d.get(v);if(void 0===w)throw new Error("Failed to find key for account key index ".concat(v));var x=void 0;x=v<o?v<c:v<d.staticAccountKeys.length?v-o<l:v-d.staticAccountKeys.length<d.accountKeysFromLookups.writable.length,g.push({pubkey:w,isSigner:v<n.numRequiredSignatures,isWritable:x})}}catch(I){m.e(I)}finally{m.f()}var S=d.get(b.programIdIndex);if(void 0===S)throw new Error("Failed to find program id for program id index ".concat(b.programIdIndex));p.push(new Be({programId:S,data:q(b.data),keys:g}))}}catch(I){y.e(I)}finally{y.f()}return new e({payerKey:h,instructions:p,recentBlockhash:a})}}]),e}();function Ke(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return Le(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Le(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw a}}}}function Le(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ze=function(){function e(t,r){if((0,n.Z)(this,e),this.signatures=void 0,this.message=void 0,void 0!==r)ke(r.length===t.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=r;else{for(var i=[],a=0;a<t.header.numRequiredSignatures;a++)i.push(new Uint8Array(re));this.signatures=i}this.message=t}return(0,i.Z)(e,[{key:"version",get:function(){return this.message.version}},{key:"serialize",value:function(){var e=this.message.serialize(),t=Array();ye(t,this.signatures.length);var r=m.n_([m.Ik(t.length,"encodedSignaturesLength"),m.A9(de(),this.signatures.length,"signatures"),m.Ik(e.length,"serializedMessage")]),n=new Uint8Array(2048),i=r.encode({encodedSignaturesLength:new Uint8Array(t),signatures:this.signatures,serializedMessage:e},n);return n.slice(0,i)}},{key:"sign",value:function(e){var t,r=this,n=this.message.serialize(),i=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures),a=Ke(e);try{var o=function(){var e=t.value,a=i.findIndex((function(t){return t.equals(e.publicKey)}));ke(a>=0,"Cannot sign with non signer key ".concat(e.publicKey.toBase58())),r.signatures[a]=N(n,e.secretKey)};for(a.s();!(t=a.n()).done;)o()}catch(s){a.e(s)}finally{a.f()}}},{key:"addSignature",value:function(e,t){ke(64===t.byteLength,"Signature must be 64 bytes long");var r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex((function(t){return t.equals(e)}));ke(r>=0,"Can not add signature; `".concat(e.toBase58(),"` is not required to sign this transaction")),this.signatures[r]=t}}],[{key:"deserialize",value:function(t){for(var r=(0,S.Z)(t),n=[],i=pe(r),a=0;a<i;a++)n.push(new Uint8Array(r.splice(0,re)));return new e(Ie.deserialize(new Uint8Array(r)),n)}}]),e}(),We=new Y("SysvarC1ock11111111111111111111111111111111"),Ne=new Y("SysvarEpochSchedu1e111111111111111111111111"),Ue=new Y("Sysvar1nstructions1111111111111111111111111"),qe=new Y("SysvarRecentB1ockHashes11111111111111111111"),je=new Y("SysvarRent111111111111111111111111111111111"),Me=new Y("SysvarRewards111111111111111111111111111111"),Ge=new Y("SysvarS1otHashes111111111111111111111111111"),De=new Y("SysvarS1otHistory11111111111111111111111111"),Ve=new Y("SysvarStakeHistory1111111111111111111111111");function Je(e,t,r,n){return He.apply(this,arguments)}function He(){return(He=(0,s.Z)(h().mark((function e(t,r,n,i){var a,o,s,u,c;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=i&&{skipPreflight:i.skipPreflight,preflightCommitment:i.preflightCommitment||i.commitment,maxRetries:i.maxRetries,minContextSlot:i.minContextSlot},e.next=3,t.sendTransaction(r,n,a);case 3:if(o=e.sent,null==r.recentBlockhash||null==r.lastValidBlockHeight){e.next=10;break}return e.next=7,t.confirmTransaction({abortSignal:null===i||void 0===i?void 0:i.abortSignal,signature:o,blockhash:r.recentBlockhash,lastValidBlockHeight:r.lastValidBlockHeight},i&&i.commitment);case 7:s=e.sent.value,e.next=22;break;case 10:if(null==r.minNonceContextSlot||null==r.nonceInfo){e.next=18;break}return u=r.nonceInfo.nonceInstruction,c=u.keys[0].pubkey,e.next=15,t.confirmTransaction({abortSignal:null===i||void 0===i?void 0:i.abortSignal,minContextSlot:r.minNonceContextSlot,nonceAccountPubkey:c,nonceValue:r.nonceInfo.nonce,signature:o},i&&i.commitment);case 15:s=e.sent.value,e.next=22;break;case 18:return null!=(null===i||void 0===i?void 0:i.abortSignal)&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),e.next=21,t.confirmTransaction(o,i&&i.commitment);case 21:s=e.sent.value;case 22:if(!s.err){e.next=24;break}throw new Error("Transaction ".concat(o," failed (").concat(JSON.stringify(s),")"));case 24:return e.abrupt("return",o);case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fe(e){return new Promise((function(t){return setTimeout(t,e)}))}function Xe(e,t){var r=e.layout.span>=0?e.layout.span:fe(e,t),n=a.Buffer.alloc(r),i=Object.assign({instruction:e.index},t);return e.layout.encode(i,n),n}function Ye(e,t){var r;try{r=e.layout.decode(t)}catch(n){throw new Error("invalid instruction; "+n)}if(r.instruction!==e.index)throw new Error("invalid instruction; instruction index mismatch ".concat(r.instruction," != ").concat(e.index));return r}var $e,Qe=m._O("lamportsPerSignature"),et=m.n_([m.Jq("version"),m.Jq("state"),le("authorizedPubkey"),le("nonce"),m.n_([Qe],"feeCalculator")]),tt=et.span,rt=function(){function e(t){(0,n.Z)(this,e),this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=t.authorizedPubkey,this.nonce=t.nonce,this.feeCalculator=t.feeCalculator}return(0,i.Z)(e,null,[{key:"fromAccountData",value:function(t){var r=et.decode(q(t),0);return new e({authorizedPubkey:new Y(r.authorizedPubkey),nonce:new Y(r.nonce).toString(),feeCalculator:r.feeCalculator})}}]),e}(),nt=($e=8,function(e){var t=(0,m.Ik)($e,e),r=function(e){return{decode:e.decode.bind(e),encode:e.encode.bind(e)}}(t),n=r.encode,i=r.decode,o=t;return o.decode=function(e,t){var r=i(e,t);return(0,w.oU)(a.Buffer.from(r))},o.encode=function(e,t,r){var i=(0,w.k$)(e,$e);return n(i,t,r)},o}),it=function(){function e(){(0,n.Z)(this,e)}return(0,i.Z)(e,null,[{key:"decodeInstructionType",value:function(e){this.checkProgramId(e.programId);for(var t,r=m.Jq("instruction").decode(e.data),n=0,i=Object.entries(at);n<i.length;n++){var a=(0,v.Z)(i[n],2),o=a[0];if(a[1].index==r){t=o;break}}if(!t)throw new Error("Instruction type incorrect; not a SystemInstruction");return t}},{key:"decodeCreateAccount",value:function(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);var t=Ye(at.Create,e.data),r=t.lamports,n=t.space,i=t.programId;return{fromPubkey:e.keys[0].pubkey,newAccountPubkey:e.keys[1].pubkey,lamports:r,space:n,programId:new Y(i)}}},{key:"decodeTransfer",value:function(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);var t=Ye(at.Transfer,e.data).lamports;return{fromPubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,lamports:t}}},{key:"decodeTransferWithSeed",value:function(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);var t=Ye(at.TransferWithSeed,e.data),r=t.lamports,n=t.seed,i=t.programId;return{fromPubkey:e.keys[0].pubkey,basePubkey:e.keys[1].pubkey,toPubkey:e.keys[2].pubkey,lamports:r,seed:n,programId:new Y(i)}}},{key:"decodeAllocate",value:function(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);var t=Ye(at.Allocate,e.data).space;return{accountPubkey:e.keys[0].pubkey,space:t}}},{key:"decodeAllocateWithSeed",value:function(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);var t=Ye(at.AllocateWithSeed,e.data),r=t.base,n=t.seed,i=t.space,a=t.programId;return{accountPubkey:e.keys[0].pubkey,basePubkey:new Y(r),seed:n,space:i,programId:new Y(a)}}},{key:"decodeAssign",value:function(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);var t=Ye(at.Assign,e.data).programId;return{accountPubkey:e.keys[0].pubkey,programId:new Y(t)}}},{key:"decodeAssignWithSeed",value:function(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);var t=Ye(at.AssignWithSeed,e.data),r=t.base,n=t.seed,i=t.programId;return{accountPubkey:e.keys[0].pubkey,basePubkey:new Y(r),seed:n,programId:new Y(i)}}},{key:"decodeCreateWithSeed",value:function(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);var t=Ye(at.CreateWithSeed,e.data),r=t.base,n=t.seed,i=t.lamports,a=t.space,o=t.programId;return{fromPubkey:e.keys[0].pubkey,newAccountPubkey:e.keys[1].pubkey,basePubkey:new Y(r),seed:n,lamports:i,space:a,programId:new Y(o)}}},{key:"decodeNonceInitialize",value:function(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);var t=Ye(at.InitializeNonceAccount,e.data).authorized;return{noncePubkey:e.keys[0].pubkey,authorizedPubkey:new Y(t)}}},{key:"decodeNonceAdvance",value:function(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),Ye(at.AdvanceNonceAccount,e.data),{noncePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey}}},{key:"decodeNonceWithdraw",value:function(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,5);var t=Ye(at.WithdrawNonceAccount,e.data).lamports;return{noncePubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey,lamports:t}}},{key:"decodeNonceAuthorize",value:function(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);var t=Ye(at.AuthorizeNonceAccount,e.data).authorized;return{noncePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[1].pubkey,newAuthorizedPubkey:new Y(t)}}},{key:"checkProgramId",value:function(e){if(!e.equals(ot.programId))throw new Error("invalid instruction; programId is not SystemProgram")}},{key:"checkKeyLength",value:function(e,t){if(e.length<t)throw new Error("invalid instruction; found ".concat(e.length," keys, expected at least ").concat(t))}}]),e}(),at=Object.freeze({Create:{index:0,layout:m.n_([m.Jq("instruction"),m.gM("lamports"),m.gM("space"),le("programId")])},Assign:{index:1,layout:m.n_([m.Jq("instruction"),le("programId")])},Transfer:{index:2,layout:m.n_([m.Jq("instruction"),nt("lamports")])},CreateWithSeed:{index:3,layout:m.n_([m.Jq("instruction"),le("base"),he("seed"),m.gM("lamports"),m.gM("space"),le("programId")])},AdvanceNonceAccount:{index:4,layout:m.n_([m.Jq("instruction")])},WithdrawNonceAccount:{index:5,layout:m.n_([m.Jq("instruction"),m.gM("lamports")])},InitializeNonceAccount:{index:6,layout:m.n_([m.Jq("instruction"),le("authorized")])},AuthorizeNonceAccount:{index:7,layout:m.n_([m.Jq("instruction"),le("authorized")])},Allocate:{index:8,layout:m.n_([m.Jq("instruction"),m.gM("space")])},AllocateWithSeed:{index:9,layout:m.n_([m.Jq("instruction"),le("base"),he("seed"),m.gM("space"),le("programId")])},AssignWithSeed:{index:10,layout:m.n_([m.Jq("instruction"),le("base"),he("seed"),le("programId")])},TransferWithSeed:{index:11,layout:m.n_([m.Jq("instruction"),nt("lamports"),he("seed"),le("programId")])},UpgradeNonceAccount:{index:12,layout:m.n_([m.Jq("instruction")])}}),ot=function(){function e(){(0,n.Z)(this,e)}return(0,i.Z)(e,null,[{key:"createAccount",value:function(e){var t=Xe(at.Create,{lamports:e.lamports,space:e.space,programId:q(e.programId.toBuffer())});return new Be({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:t})}},{key:"transfer",value:function(e){var t,r;"basePubkey"in e?(t=Xe(at.TransferWithSeed,{lamports:BigInt(e.lamports),seed:e.seed,programId:q(e.programId.toBuffer())}),r=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]):(t=Xe(at.Transfer,{lamports:BigInt(e.lamports)}),r=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]);return new Be({keys:r,programId:this.programId,data:t})}},{key:"assign",value:function(e){var t,r;"basePubkey"in e?(t=Xe(at.AssignWithSeed,{base:q(e.basePubkey.toBuffer()),seed:e.seed,programId:q(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]):(t=Xe(at.Assign,{programId:q(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]);return new Be({keys:r,programId:this.programId,data:t})}},{key:"createAccountWithSeed",value:function(e){var t=Xe(at.CreateWithSeed,{base:q(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:q(e.programId.toBuffer())}),r=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey!=e.fromPubkey&&r.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new Be({keys:r,programId:this.programId,data:t})}},{key:"createNonceAccount",value:function(t){var r=new Te;"basePubkey"in t&&"seed"in t?r.add(e.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:tt,programId:this.programId})):r.add(e.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,lamports:t.lamports,space:tt,programId:this.programId}));var n={noncePubkey:t.noncePubkey,authorizedPubkey:t.authorizedPubkey};return r.add(this.nonceInitialize(n)),r}},{key:"nonceInitialize",value:function(e){var t=Xe(at.InitializeNonceAccount,{authorized:q(e.authorizedPubkey.toBuffer())}),r={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:qe,isSigner:!1,isWritable:!1},{pubkey:je,isSigner:!1,isWritable:!1}],programId:this.programId,data:t};return new Be(r)}},{key:"nonceAdvance",value:function(e){var t=Xe(at.AdvanceNonceAccount),r={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:qe,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:t};return new Be(r)}},{key:"nonceWithdraw",value:function(e){var t=Xe(at.WithdrawNonceAccount,{lamports:e.lamports});return new Be({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:qe,isSigner:!1,isWritable:!1},{pubkey:je,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:t})}},{key:"nonceAuthorize",value:function(e){var t=Xe(at.AuthorizeNonceAccount,{authorized:q(e.newAuthorizedPubkey.toBuffer())});return new Be({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:t})}},{key:"allocate",value:function(e){var t,r;"basePubkey"in e?(t=Xe(at.AllocateWithSeed,{base:q(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:q(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]):(t=Xe(at.Allocate,{space:e.space}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]);return new Be({keys:r,programId:this.programId,data:t})}}]),e}();ot.programId=new Y("11111111111111111111111111111111");var st=ee-300,ut=function(){function e(){(0,n.Z)(this,e)}return(0,i.Z)(e,null,[{key:"getMinNumSignatures",value:function(t){return 2*(Math.ceil(t/e.chunkSize)+1+1)}},{key:"load",value:function(){var t=(0,s.Z)(h().mark((function t(r,n,i,o,s){var u,c,l,d,f,p,y,k,b,g,v,w,x,S,I,_,A,R,P;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.getMinimumBalanceForRentExemption(s.length);case 2:return u=t.sent,t.next=5,r.getAccountInfo(i.publicKey,"confirmed");case 5:if(c=t.sent,l=null,null===c){t.next=16;break}if(!c.executable){t.next=11;break}return console.error("Program load failed, account is already executable"),t.abrupt("return",!1);case 11:c.data.length!==s.length&&(l=l||new Te).add(ot.allocate({accountPubkey:i.publicKey,space:s.length})),c.owner.equals(o)||(l=l||new Te).add(ot.assign({accountPubkey:i.publicKey,programId:o})),c.lamports<u&&(l=l||new Te).add(ot.transfer({fromPubkey:n.publicKey,toPubkey:i.publicKey,lamports:u-c.lamports})),t.next=17;break;case 16:l=(new Te).add(ot.createAccount({fromPubkey:n.publicKey,newAccountPubkey:i.publicKey,lamports:u>0?u:1,space:s.length,programId:o}));case 17:if(null===l){t.next=20;break}return t.next=20,Je(r,l,[n,i],{commitment:"confirmed"});case 20:d=m.n_([m.Jq("instruction"),m.Jq("offset"),m.Jq("bytesLength"),m.Jq("bytesLengthPadding"),m.A9(m.u8("byte"),m.cv(m.Jq(),-8),"bytes")]),f=e.chunkSize,p=0,y=s,k=[];case 25:if(!(y.length>0)){t.next=39;break}if(b=y.slice(0,f),g=a.Buffer.alloc(f+16),d.encode({instruction:0,offset:p,bytes:b,bytesLength:0,bytesLengthPadding:0},g),v=(new Te).add({keys:[{pubkey:i.publicKey,isSigner:!0,isWritable:!0}],programId:o,data:g}),k.push(Je(r,v,[n,i],{commitment:"confirmed"})),!r._rpcEndpoint.includes("solana.com")){t.next=35;break}return 4,t.next=35,Fe(250);case 35:p+=f,y=y.slice(f),t.next=25;break;case 39:return t.next=41,Promise.all(k);case 41:return w=m.n_([m.Jq("instruction")]),x=a.Buffer.alloc(w.span),w.encode({instruction:1},x),S=(new Te).add({keys:[{pubkey:i.publicKey,isSigner:!0,isWritable:!0},{pubkey:je,isSigner:!1,isWritable:!1}],programId:o,data:x}),I="processed",t.next=48,r.sendTransaction(S,[n,i],{preflightCommitment:I});case 48:return _=t.sent,t.next=51,r.confirmTransaction({signature:_,lastValidBlockHeight:S.lastValidBlockHeight,blockhash:S.recentBlockhash},I);case 51:if(A=t.sent,R=A.context,!(P=A.value).err){t.next=56;break}throw new Error("Transaction ".concat(_," failed (").concat(JSON.stringify(P),")"));case 56:return t.prev=57,t.next=60,r.getSlot({commitment:I});case 60:if(!(t.sent>R.slot)){t.next=63;break}return t.abrupt("break",71);case 63:t.next=67;break;case 65:t.prev=65,t.t0=t.catch(57);case 67:return t.next=69,new Promise((function(e){return setTimeout(e,Math.round(200))}));case 69:t.next=56;break;case 71:return t.abrupt("return",!0);case 72:case"end":return t.stop()}}),t,null,[[57,65]])})));return function(e,r,n,i,a){return t.apply(this,arguments)}}()}]),e}();ut.chunkSize=st;var ct=new Y("BPFLoader2111111111111111111111111111111111"),lt=function(){function e(){(0,n.Z)(this,e)}return(0,i.Z)(e,null,[{key:"getMinNumSignatures",value:function(e){return ut.getMinNumSignatures(e)}},{key:"load",value:function(e,t,r,n,i){return ut.load(e,t,r,i,n)}}]),e}();function dt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ht=Object.prototype.toString,ft=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};function pt(e,t){var r,n,i,a,o,s,u;if(!0===e)return"true";if(!1===e)return"false";switch(typeof e){case"object":if(null===e)return null;if(e.toJSON&&"function"===typeof e.toJSON)return pt(e.toJSON(),t);if("[object Array]"===(u=ht.call(e))){for(i="[",n=e.length-1,r=0;r<n;r++)i+=pt(e[r],!0)+",";return n>-1&&(i+=pt(e[r],!0)),i+"]"}if("[object Object]"===u){for(n=(a=ft(e).sort()).length,i="",r=0;r<n;)void 0!==(s=pt(e[o=a[r]],!1))&&(i&&(i+=","),i+=JSON.stringify(o)+":"+s),r++;return"{"+i+"}"}return JSON.stringify(e);case"function":case"undefined":return t?null:void 0;case"string":return JSON.stringify(e);default:return isFinite(e)?e:null}}var yt=dt((function(e){var t=pt(e,!1);if(void 0!==t)return""+t}));function kt(e){for(var t=0;e>1;)e/=2,t++;return t}var bt=function(){function e(t,r,i,a,o){(0,n.Z)(this,e),this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=t,this.leaderScheduleSlotOffset=r,this.warmup=i,this.firstNormalEpoch=a,this.firstNormalSlot=o}return(0,i.Z)(e,[{key:"getEpoch",value:function(e){return this.getEpochAndSlotIndex(e)[0]}},{key:"getEpochAndSlotIndex",value:function(e){if(e<this.firstNormalSlot){var t=kt(0===(r=e+32+1)?1:(r--,r|=r>>1,r|=r>>2,r|=r>>4,r|=r>>8,r|=r>>16,1+(r|=r>>32)))-kt(32)-1;return[t,e-(this.getSlotsInEpoch(t)-32)]}var r,n=e-this.firstNormalSlot,i=Math.floor(n/this.slotsPerEpoch);return[this.firstNormalEpoch+i,n%this.slotsPerEpoch]}},{key:"getFirstSlotInEpoch",value:function(e){return e<=this.firstNormalEpoch?32*(Math.pow(2,e)-1):(e-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}},{key:"getLastSlotInEpoch",value:function(e){return this.getFirstSlotInEpoch(e)+this.getSlotsInEpoch(e)-1}},{key:"getSlotsInEpoch",value:function(e){return e<this.firstNormalEpoch?Math.pow(2,e+kt(32)):this.slotsPerEpoch}}]),e}();function gt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,l.Z)(e);if(t){var i=(0,l.Z)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,c.Z)(this,r)}}var mt=function(e){(0,u.Z)(r,e);var t=gt(r);function r(e,i){var a;return(0,n.Z)(this,r),(a=t.call(this,e)).logs=void 0,a.logs=i,a}return(0,i.Z)(r)}((0,E.Z)(Error)),vt={JSON_RPC_SERVER_ERROR_BLOCK_CLEANED_UP:-32001,JSON_RPC_SERVER_ERROR_SEND_TRANSACTION_PREFLIGHT_FAILURE:-32002,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_VERIFICATION_FAILURE:-32003,JSON_RPC_SERVER_ERROR_BLOCK_NOT_AVAILABLE:-32004,JSON_RPC_SERVER_ERROR_NODE_UNHEALTHY:-32005,JSON_RPC_SERVER_ERROR_TRANSACTION_PRECOMPILE_VERIFICATION_FAILURE:-32006,JSON_RPC_SERVER_ERROR_SLOT_SKIPPED:-32007,JSON_RPC_SERVER_ERROR_NO_SNAPSHOT:-32008,JSON_RPC_SERVER_ERROR_LONG_TERM_STORAGE_SLOT_SKIPPED:-32009,JSON_RPC_SERVER_ERROR_KEY_EXCLUDED_FROM_SECONDARY_INDEX:-32010,JSON_RPC_SERVER_ERROR_TRANSACTION_HISTORY_NOT_AVAILABLE:-32011,JSON_RPC_SCAN_ERROR:-32012,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_LEN_MISMATCH:-32013,JSON_RPC_SERVER_ERROR_BLOCK_STATUS_NOT_AVAILABLE_YET:-32014,JSON_RPC_SERVER_ERROR_UNSUPPORTED_TRANSACTION_VERSION:-32015,JSON_RPC_SERVER_ERROR_MIN_CONTEXT_SLOT_NOT_REACHED:-32016},wt=function(e){(0,u.Z)(r,e);var t=gt(r);function r(e,i){var a,o=e.code,s=e.message,u=e.data;return(0,n.Z)(this,r),(a=t.call(this,null!=i?"".concat(i,": ").concat(s):s)).code=void 0,a.data=void 0,a.code=o,a.data=u,a.name="SolanaJSONRPCError",a}return(0,i.Z)(r)}((0,E.Z)(Error)),xt=globalThis.fetch;function St(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function It(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,l.Z)(e);if(t){var i=(0,l.Z)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,c.Z)(this,r)}}var _t=function(e){(0,u.Z)(r,e);var t=It(r);function r(e,i,a){var o;(0,n.Z)(this,r);return(o=t.call(this,(function(e){var t=(0,Z.Z)(e,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?St(Object(r),!0).forEach((function(t){(0,x.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):St(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3},i));return o.underlyingSocket="socket"in t?t.socket:t,t}),e,i,a)).underlyingSocket=void 0,o}return(0,i.Z)(r,[{key:"call",value:function(){for(var e,t,n=null===(e=this.underlyingSocket)||void 0===e?void 0:e.readyState,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return 1===n?(t=(0,B.Z)((0,l.Z)(r.prototype),"call",this)).call.apply(t,[this].concat(a)):Promise.reject(new Error("Tried to call a JSON-RPC method `"+a[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+n+")"))}},{key:"notify",value:function(){for(var e,t,n=null===(e=this.underlyingSocket)||void 0===e?void 0:e.readyState,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return 1===n?(t=(0,B.Z)((0,l.Z)(r.prototype),"notify",this)).call.apply(t,[this].concat(a)):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+a[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+n+")"))}}]),r}(T.Z);var At,Rt=function(){function e(t){(0,n.Z)(this,e),this.key=void 0,this.state=void 0,this.key=t.key,this.state=t.state}return(0,i.Z)(e,[{key:"isActive",value:function(){var e=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===e}}],[{key:"deserialize",value:function(e){var t=function(e,t){var r;try{r=e.layout.decode(t)}catch(n){throw new Error("invalid instruction; "+n)}if(r.typeIndex!==e.index)throw new Error("invalid account data; account type mismatch ".concat(r.typeIndex," != ").concat(e.index));return r}(Pt,e),r=e.length-56;ke(r>=0,"lookup table is invalid"),ke(r%32===0,"lookup table is invalid");var n=r/32,i=m.n_([m.A9(le(),n,"addresses")]).decode(e.slice(56)).addresses;return{deactivationSlot:t.deactivationSlot,lastExtendedSlot:t.lastExtendedSlot,lastExtendedSlotStartIndex:t.lastExtendedStartIndex,authority:0!==t.authority.length?new Y(t.authority[0]):void 0,addresses:i.map((function(e){return new Y(e)}))}}}]),e}(),Pt={index:1,layout:m.n_([m.Jq("typeIndex"),nt("deactivationSlot"),m._O("lastExtendedSlot"),m.u8("lastExtendedStartIndex"),m.u8(),m.A9(le(),m.cv(m.u8(),-1),"authority")])},Et=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;var Bt=["commitment"],Tt=["encoding"],Zt=["commitment"],Ot=["commitment"];function Ct(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Kt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ct(Object(r),!0).forEach((function(t){(0,x.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ct(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Lt=(0,A.oQ)((0,A.eE)(Y),(0,A.Z_)(),(function(e){return new Y(e)})),zt=(0,A.bc)([(0,A.Z_)(),(0,A.i0)("base64")]),Wt=(0,A.oQ)((0,A.eE)(a.Buffer),zt,(function(e){return a.Buffer.from(e[0],"base64")})),Nt=3e4;function Ut(e){var t,r;if("string"===typeof e)t=e;else if(e){t=e.commitment,r=(0,_.Z)(e,Bt)}return{commitment:t,config:r}}function qt(e){return(0,A.G0)([(0,A.dt)({jsonrpc:(0,A.i0)("2.0"),id:(0,A.Z_)(),result:e}),(0,A.dt)({jsonrpc:(0,A.i0)("2.0"),id:(0,A.Z_)(),error:(0,A.dt)({code:(0,A._4)(),message:(0,A.Z_)(),data:(0,A.jt)((0,A.Yj)())})})])}var jt=qt((0,A._4)());function Mt(e){return(0,A.oQ)(qt(e),jt,(function(t){return"error"in t?t:Kt(Kt({},t),{},{result:(0,A.Ue)(t.result,e)})}))}function Gt(e){return Mt((0,A.dt)({context:(0,A.dt)({slot:(0,A.Rx)()}),value:e}))}function Dt(e){return(0,A.dt)({context:(0,A.dt)({slot:(0,A.Rx)()}),value:e})}function Vt(e,t){return 0===e?new Se({header:t.header,staticAccountKeys:t.accountKeys.map((function(e){return new Y(e)})),recentBlockhash:t.recentBlockhash,compiledInstructions:t.instructions.map((function(e){return{programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:k().decode(e.data)}})),addressTableLookups:t.addressTableLookups}):new ve(t)}var Jt=(0,A.dt)({foundation:(0,A.Rx)(),foundationTerm:(0,A.Rx)(),initial:(0,A.Rx)(),taper:(0,A.Rx)(),terminal:(0,A.Rx)()}),Ht=Mt((0,A.IX)((0,A.AG)((0,A.dt)({epoch:(0,A.Rx)(),effectiveSlot:(0,A.Rx)(),amount:(0,A.Rx)(),postBalance:(0,A.Rx)(),commission:(0,A.jt)((0,A.AG)((0,A.Rx)()))})))),Ft=(0,A.IX)((0,A.dt)({slot:(0,A.Rx)(),prioritizationFee:(0,A.Rx)()})),Xt=(0,A.dt)({total:(0,A.Rx)(),validator:(0,A.Rx)(),foundation:(0,A.Rx)(),epoch:(0,A.Rx)()}),Yt=(0,A.dt)({epoch:(0,A.Rx)(),slotIndex:(0,A.Rx)(),slotsInEpoch:(0,A.Rx)(),absoluteSlot:(0,A.Rx)(),blockHeight:(0,A.jt)((0,A.Rx)()),transactionCount:(0,A.jt)((0,A.Rx)())}),$t=(0,A.dt)({slotsPerEpoch:(0,A.Rx)(),leaderScheduleSlotOffset:(0,A.Rx)(),warmup:(0,A.O7)(),firstNormalEpoch:(0,A.Rx)(),firstNormalSlot:(0,A.Rx)()}),Qt=(0,A.IM)((0,A.Z_)(),(0,A.IX)((0,A.Rx)())),er=(0,A.AG)((0,A.G0)([(0,A.dt)({}),(0,A.Z_)()])),tr=(0,A.dt)({err:er}),rr=(0,A.i0)("receivedSignature"),nr=(0,A.dt)({"solana-core":(0,A.Z_)(),"feature-set":(0,A.jt)((0,A.Rx)())}),ir=Gt((0,A.dt)({err:(0,A.AG)((0,A.G0)([(0,A.dt)({}),(0,A.Z_)()])),logs:(0,A.AG)((0,A.IX)((0,A.Z_)())),accounts:(0,A.jt)((0,A.AG)((0,A.IX)((0,A.AG)((0,A.dt)({executable:(0,A.O7)(),owner:(0,A.Z_)(),lamports:(0,A.Rx)(),data:(0,A.IX)((0,A.Z_)()),rentEpoch:(0,A.jt)((0,A.Rx)())}))))),unitsConsumed:(0,A.jt)((0,A.Rx)()),returnData:(0,A.jt)((0,A.AG)((0,A.dt)({programId:(0,A.Z_)(),data:(0,A.bc)([(0,A.Z_)(),(0,A.i0)("base64")])})))})),ar=Gt((0,A.dt)({byIdentity:(0,A.IM)((0,A.Z_)(),(0,A.IX)((0,A.Rx)())),range:(0,A.dt)({firstSlot:(0,A.Rx)(),lastSlot:(0,A.Rx)()})}));var or=Mt(Jt),sr=Mt(Xt),ur=Mt(Ft),cr=Mt(Yt),lr=Mt($t),dr=Mt(Qt),hr=Mt((0,A.Rx)()),fr=Gt((0,A.dt)({total:(0,A.Rx)(),circulating:(0,A.Rx)(),nonCirculating:(0,A.Rx)(),nonCirculatingAccounts:(0,A.IX)(Lt)})),pr=(0,A.dt)({amount:(0,A.Z_)(),uiAmount:(0,A.AG)((0,A.Rx)()),decimals:(0,A.Rx)(),uiAmountString:(0,A.jt)((0,A.Z_)())}),yr=Gt((0,A.IX)((0,A.dt)({address:Lt,amount:(0,A.Z_)(),uiAmount:(0,A.AG)((0,A.Rx)()),decimals:(0,A.Rx)(),uiAmountString:(0,A.jt)((0,A.Z_)())}))),kr=Gt((0,A.IX)((0,A.dt)({pubkey:Lt,account:(0,A.dt)({executable:(0,A.O7)(),owner:Lt,lamports:(0,A.Rx)(),data:Wt,rentEpoch:(0,A.Rx)()})}))),br=(0,A.dt)({program:(0,A.Z_)(),parsed:(0,A._4)(),space:(0,A.Rx)()}),gr=Gt((0,A.IX)((0,A.dt)({pubkey:Lt,account:(0,A.dt)({executable:(0,A.O7)(),owner:Lt,lamports:(0,A.Rx)(),data:br,rentEpoch:(0,A.Rx)()})}))),mr=Gt((0,A.IX)((0,A.dt)({lamports:(0,A.Rx)(),address:Lt}))),vr=(0,A.dt)({executable:(0,A.O7)(),owner:Lt,lamports:(0,A.Rx)(),data:Wt,rentEpoch:(0,A.Rx)()}),wr=(0,A.dt)({pubkey:Lt,account:vr}),xr=(0,A.oQ)((0,A.G0)([(0,A.eE)(a.Buffer),br]),(0,A.G0)([zt,br]),(function(e){return Array.isArray(e)?(0,A.Ue)(e,Wt):e})),Sr=(0,A.dt)({executable:(0,A.O7)(),owner:Lt,lamports:(0,A.Rx)(),data:xr,rentEpoch:(0,A.Rx)()}),Ir=(0,A.dt)({pubkey:Lt,account:Sr}),_r=(0,A.dt)({state:(0,A.G0)([(0,A.i0)("active"),(0,A.i0)("inactive"),(0,A.i0)("activating"),(0,A.i0)("deactivating")]),active:(0,A.Rx)(),inactive:(0,A.Rx)()}),Ar=Mt((0,A.IX)((0,A.dt)({signature:(0,A.Z_)(),slot:(0,A.Rx)(),err:er,memo:(0,A.AG)((0,A.Z_)()),blockTime:(0,A.jt)((0,A.AG)((0,A.Rx)()))}))),Rr=Mt((0,A.IX)((0,A.dt)({signature:(0,A.Z_)(),slot:(0,A.Rx)(),err:er,memo:(0,A.AG)((0,A.Z_)()),blockTime:(0,A.jt)((0,A.AG)((0,A.Rx)()))}))),Pr=(0,A.dt)({subscription:(0,A.Rx)(),result:Dt(vr)}),Er=(0,A.dt)({pubkey:Lt,account:vr}),Br=(0,A.dt)({subscription:(0,A.Rx)(),result:Dt(Er)}),Tr=(0,A.dt)({parent:(0,A.Rx)(),slot:(0,A.Rx)(),root:(0,A.Rx)()}),Zr=(0,A.dt)({subscription:(0,A.Rx)(),result:Tr}),Or=(0,A.G0)([(0,A.dt)({type:(0,A.G0)([(0,A.i0)("firstShredReceived"),(0,A.i0)("completed"),(0,A.i0)("optimisticConfirmation"),(0,A.i0)("root")]),slot:(0,A.Rx)(),timestamp:(0,A.Rx)()}),(0,A.dt)({type:(0,A.i0)("createdBank"),parent:(0,A.Rx)(),slot:(0,A.Rx)(),timestamp:(0,A.Rx)()}),(0,A.dt)({type:(0,A.i0)("frozen"),slot:(0,A.Rx)(),timestamp:(0,A.Rx)(),stats:(0,A.dt)({numTransactionEntries:(0,A.Rx)(),numSuccessfulTransactions:(0,A.Rx)(),numFailedTransactions:(0,A.Rx)(),maxTransactionsPerEntry:(0,A.Rx)()})}),(0,A.dt)({type:(0,A.i0)("dead"),slot:(0,A.Rx)(),timestamp:(0,A.Rx)(),err:(0,A.Z_)()})]),Cr=(0,A.dt)({subscription:(0,A.Rx)(),result:Or}),Kr=(0,A.dt)({subscription:(0,A.Rx)(),result:Dt((0,A.G0)([tr,rr]))}),Lr=(0,A.dt)({subscription:(0,A.Rx)(),result:(0,A.Rx)()}),zr=(0,A.dt)({pubkey:(0,A.Z_)(),gossip:(0,A.AG)((0,A.Z_)()),tpu:(0,A.AG)((0,A.Z_)()),rpc:(0,A.AG)((0,A.Z_)()),version:(0,A.AG)((0,A.Z_)())}),Wr=(0,A.dt)({votePubkey:(0,A.Z_)(),nodePubkey:(0,A.Z_)(),activatedStake:(0,A.Rx)(),epochVoteAccount:(0,A.O7)(),epochCredits:(0,A.IX)((0,A.bc)([(0,A.Rx)(),(0,A.Rx)(),(0,A.Rx)()])),commission:(0,A.Rx)(),lastVote:(0,A.Rx)(),rootSlot:(0,A.AG)((0,A.Rx)())}),Nr=Mt((0,A.dt)({current:(0,A.IX)(Wr),delinquent:(0,A.IX)(Wr)})),Ur=(0,A.G0)([(0,A.i0)("processed"),(0,A.i0)("confirmed"),(0,A.i0)("finalized")]),qr=(0,A.dt)({slot:(0,A.Rx)(),confirmations:(0,A.AG)((0,A.Rx)()),err:er,confirmationStatus:(0,A.jt)(Ur)}),jr=Gt((0,A.IX)((0,A.AG)(qr))),Mr=Mt((0,A.Rx)()),Gr=(0,A.dt)({accountKey:Lt,writableIndexes:(0,A.IX)((0,A.Rx)()),readonlyIndexes:(0,A.IX)((0,A.Rx)())}),Dr=(0,A.dt)({signatures:(0,A.IX)((0,A.Z_)()),message:(0,A.dt)({accountKeys:(0,A.IX)((0,A.Z_)()),header:(0,A.dt)({numRequiredSignatures:(0,A.Rx)(),numReadonlySignedAccounts:(0,A.Rx)(),numReadonlyUnsignedAccounts:(0,A.Rx)()}),instructions:(0,A.IX)((0,A.dt)({accounts:(0,A.IX)((0,A.Rx)()),data:(0,A.Z_)(),programIdIndex:(0,A.Rx)()})),recentBlockhash:(0,A.Z_)(),addressTableLookups:(0,A.jt)((0,A.IX)(Gr))})}),Vr=(0,A.dt)({pubkey:Lt,signer:(0,A.O7)(),writable:(0,A.O7)(),source:(0,A.jt)((0,A.G0)([(0,A.i0)("transaction"),(0,A.i0)("lookupTable")]))}),Jr=(0,A.dt)({accountKeys:(0,A.IX)(Vr),signatures:(0,A.IX)((0,A.Z_)())}),Hr=(0,A.dt)({parsed:(0,A._4)(),program:(0,A.Z_)(),programId:Lt}),Fr=(0,A.dt)({accounts:(0,A.IX)(Lt),data:(0,A.Z_)(),programId:Lt}),Xr=(0,A.G0)([Fr,Hr]),Yr=(0,A.G0)([(0,A.dt)({parsed:(0,A._4)(),program:(0,A.Z_)(),programId:(0,A.Z_)()}),(0,A.dt)({accounts:(0,A.IX)((0,A.Z_)()),data:(0,A.Z_)(),programId:(0,A.Z_)()})]),$r=(0,A.oQ)(Xr,Yr,(function(e){return"accounts"in e?(0,A.Ue)(e,Fr):(0,A.Ue)(e,Hr)})),Qr=(0,A.dt)({signatures:(0,A.IX)((0,A.Z_)()),message:(0,A.dt)({accountKeys:(0,A.IX)(Vr),instructions:(0,A.IX)($r),recentBlockhash:(0,A.Z_)(),addressTableLookups:(0,A.jt)((0,A.AG)((0,A.IX)(Gr)))})}),en=(0,A.dt)({accountIndex:(0,A.Rx)(),mint:(0,A.Z_)(),owner:(0,A.jt)((0,A.Z_)()),uiTokenAmount:pr}),tn=(0,A.dt)({writable:(0,A.IX)(Lt),readonly:(0,A.IX)(Lt)}),rn=(0,A.dt)({err:er,fee:(0,A.Rx)(),innerInstructions:(0,A.jt)((0,A.AG)((0,A.IX)((0,A.dt)({index:(0,A.Rx)(),instructions:(0,A.IX)((0,A.dt)({accounts:(0,A.IX)((0,A.Rx)()),data:(0,A.Z_)(),programIdIndex:(0,A.Rx)()}))})))),preBalances:(0,A.IX)((0,A.Rx)()),postBalances:(0,A.IX)((0,A.Rx)()),logMessages:(0,A.jt)((0,A.AG)((0,A.IX)((0,A.Z_)()))),preTokenBalances:(0,A.jt)((0,A.AG)((0,A.IX)(en))),postTokenBalances:(0,A.jt)((0,A.AG)((0,A.IX)(en))),loadedAddresses:(0,A.jt)(tn),computeUnitsConsumed:(0,A.jt)((0,A.Rx)())}),nn=(0,A.dt)({err:er,fee:(0,A.Rx)(),innerInstructions:(0,A.jt)((0,A.AG)((0,A.IX)((0,A.dt)({index:(0,A.Rx)(),instructions:(0,A.IX)($r)})))),preBalances:(0,A.IX)((0,A.Rx)()),postBalances:(0,A.IX)((0,A.Rx)()),logMessages:(0,A.jt)((0,A.AG)((0,A.IX)((0,A.Z_)()))),preTokenBalances:(0,A.jt)((0,A.AG)((0,A.IX)(en))),postTokenBalances:(0,A.jt)((0,A.AG)((0,A.IX)(en))),loadedAddresses:(0,A.jt)(tn),computeUnitsConsumed:(0,A.jt)((0,A.Rx)())}),an=(0,A.G0)([(0,A.i0)(0),(0,A.i0)("legacy")]),on=(0,A.dt)({pubkey:(0,A.Z_)(),lamports:(0,A.Rx)(),postBalance:(0,A.AG)((0,A.Rx)()),rewardType:(0,A.AG)((0,A.Z_)()),commission:(0,A.jt)((0,A.AG)((0,A.Rx)()))}),sn=Mt((0,A.AG)((0,A.dt)({blockhash:(0,A.Z_)(),previousBlockhash:(0,A.Z_)(),parentSlot:(0,A.Rx)(),transactions:(0,A.IX)((0,A.dt)({transaction:Dr,meta:(0,A.AG)(rn),version:(0,A.jt)(an)})),rewards:(0,A.jt)((0,A.IX)(on)),blockTime:(0,A.AG)((0,A.Rx)()),blockHeight:(0,A.AG)((0,A.Rx)())}))),un=Mt((0,A.AG)((0,A.dt)({blockhash:(0,A.Z_)(),previousBlockhash:(0,A.Z_)(),parentSlot:(0,A.Rx)(),rewards:(0,A.jt)((0,A.IX)(on)),blockTime:(0,A.AG)((0,A.Rx)()),blockHeight:(0,A.AG)((0,A.Rx)())}))),cn=Mt((0,A.AG)((0,A.dt)({blockhash:(0,A.Z_)(),previousBlockhash:(0,A.Z_)(),parentSlot:(0,A.Rx)(),transactions:(0,A.IX)((0,A.dt)({transaction:Jr,meta:(0,A.AG)(rn),version:(0,A.jt)(an)})),rewards:(0,A.jt)((0,A.IX)(on)),blockTime:(0,A.AG)((0,A.Rx)()),blockHeight:(0,A.AG)((0,A.Rx)())}))),ln=Mt((0,A.AG)((0,A.dt)({blockhash:(0,A.Z_)(),previousBlockhash:(0,A.Z_)(),parentSlot:(0,A.Rx)(),transactions:(0,A.IX)((0,A.dt)({transaction:Qr,meta:(0,A.AG)(nn),version:(0,A.jt)(an)})),rewards:(0,A.jt)((0,A.IX)(on)),blockTime:(0,A.AG)((0,A.Rx)()),blockHeight:(0,A.AG)((0,A.Rx)())}))),dn=Mt((0,A.AG)((0,A.dt)({blockhash:(0,A.Z_)(),previousBlockhash:(0,A.Z_)(),parentSlot:(0,A.Rx)(),transactions:(0,A.IX)((0,A.dt)({transaction:Jr,meta:(0,A.AG)(nn),version:(0,A.jt)(an)})),rewards:(0,A.jt)((0,A.IX)(on)),blockTime:(0,A.AG)((0,A.Rx)()),blockHeight:(0,A.AG)((0,A.Rx)())}))),hn=Mt((0,A.AG)((0,A.dt)({blockhash:(0,A.Z_)(),previousBlockhash:(0,A.Z_)(),parentSlot:(0,A.Rx)(),rewards:(0,A.jt)((0,A.IX)(on)),blockTime:(0,A.AG)((0,A.Rx)()),blockHeight:(0,A.AG)((0,A.Rx)())}))),fn=Mt((0,A.AG)((0,A.dt)({blockhash:(0,A.Z_)(),previousBlockhash:(0,A.Z_)(),parentSlot:(0,A.Rx)(),transactions:(0,A.IX)((0,A.dt)({transaction:Dr,meta:(0,A.AG)(rn)})),rewards:(0,A.jt)((0,A.IX)(on)),blockTime:(0,A.AG)((0,A.Rx)())}))),pn=Mt((0,A.AG)((0,A.dt)({blockhash:(0,A.Z_)(),previousBlockhash:(0,A.Z_)(),parentSlot:(0,A.Rx)(),signatures:(0,A.IX)((0,A.Z_)()),blockTime:(0,A.AG)((0,A.Rx)())}))),yn=Mt((0,A.AG)((0,A.dt)({slot:(0,A.Rx)(),meta:rn,blockTime:(0,A.jt)((0,A.AG)((0,A.Rx)())),transaction:Dr,version:(0,A.jt)(an)}))),kn=Mt((0,A.AG)((0,A.dt)({slot:(0,A.Rx)(),transaction:Qr,meta:(0,A.AG)(nn),blockTime:(0,A.jt)((0,A.AG)((0,A.Rx)())),version:(0,A.jt)(an)}))),bn=Gt((0,A.dt)({blockhash:(0,A.Z_)(),feeCalculator:(0,A.dt)({lamportsPerSignature:(0,A.Rx)()})})),gn=Gt((0,A.dt)({blockhash:(0,A.Z_)(),lastValidBlockHeight:(0,A.Rx)()})),mn=Gt((0,A.O7)()),vn=(0,A.dt)({slot:(0,A.Rx)(),numTransactions:(0,A.Rx)(),numSlots:(0,A.Rx)(),samplePeriodSecs:(0,A.Rx)()}),wn=Mt((0,A.IX)(vn)),xn=Gt((0,A.AG)((0,A.dt)({feeCalculator:(0,A.dt)({lamportsPerSignature:(0,A.Rx)()})}))),Sn=Mt((0,A.Z_)()),In=Mt((0,A.Z_)()),_n=(0,A.dt)({err:er,logs:(0,A.IX)((0,A.Z_)()),signature:(0,A.Z_)()}),An=(0,A.dt)({result:Dt(_n),subscription:(0,A.Rx)()}),Rn={"solana-client":"js/".concat(null!==(At="0.0.0-development")?At:"UNKNOWN")},Pn=function(){function e(t,r){var i,a,o,u,c,l,d,f=this;(0,n.Z)(this,e),this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=function(){var e={};return function(){var t=(0,s.Z)(h().mark((function t(r){var n,i,a,o,u,c;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=Ut(r),a=i.commitment,o=i.config,u=f._buildArgs([],a,void 0,o),c=yt(u),e[c]=null!==(n=e[c])&&void 0!==n?n:(0,s.Z)(h().mark((function t(){var r,n;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f._rpcRequest("getBlockHeight",u);case 3:if(r=t.sent,!("error"in(n=(0,A.Ue)(r,Mt((0,A.Rx)()))))){t.next=7;break}throw new wt(n.error,"failed to get block height information");case 7:return t.abrupt("return",n.result);case 8:return t.prev=8,delete e[c],t.finish(8);case 11:case"end":return t.stop()}}),t,null,[[0,,8,11]])})))(),t.next=6,e[c];case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(),r&&"string"===typeof r?this._commitment=r:r&&(this._commitment=r.commitment,this._confirmTransactionInitialTimeout=r.confirmTransactionInitialTimeout,i=r.wsEndpoint,a=r.httpHeaders,o=r.fetch,u=r.fetchMiddleware,c=r.disableRetryOnRateLimit,l=r.httpAgent),this._rpcEndpoint=function(e){if(!1===/^https?:/.test(e))throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return e}(t),this._rpcWsEndpoint=i||function(e){var t=e.match(Et);if(null==t)throw TypeError("Failed to validate endpoint URL `".concat(e,"`"));var r=(0,v.Z)(t,4);r[0];var n=r[1],i=r[2],a=r[3],o=e.startsWith("https:")?"wss:":"ws:",s=null==i?null:parseInt(i.slice(1),10),u=null==s?"":":".concat(s+1);return"".concat(o,"//").concat(n).concat(u).concat(a)}(t),this._rpcClient=function(e,t,r,n,i,a){var o,u=r||xt;return null!=a&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments."),n&&(o=function(){var e=(0,s.Z)(h().mark((function e(t,r){var i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,i){try{n(t,r,(function(t,r){return e([t,r])}))}catch(a){i(a)}}));case 2:return i=e.sent,e.next=5,u.apply(void 0,(0,S.Z)(i));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),new(P())(function(){var r=(0,s.Z)(h().mark((function r(n,a){var s,c,l,d,f;return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:s={method:"POST",body:n,agent:void 0,headers:Object.assign({"Content-Type":"application/json"},t||{},Rn)},r.prev=1,c=5,d=500;case 4:if(!o){r.next=10;break}return r.next=7,o(e,s);case 7:l=r.sent,r.next=13;break;case 10:return r.next=12,u(e,s);case 12:l=r.sent;case 13:if(429===l.status){r.next=15;break}return r.abrupt("break",26);case 15:if(!0!==i){r.next=17;break}return r.abrupt("break",26);case 17:if(0!==(c-=1)){r.next=20;break}return r.abrupt("break",26);case 20:return console.log("Server responded with ".concat(l.status," ").concat(l.statusText,".  Retrying after ").concat(d,"ms delay...")),r.next=23,Fe(d);case 23:d*=2;case 24:r.next=4;break;case 26:return r.next=28,l.text();case 28:f=r.sent,l.ok?a(null,f):a(new Error("".concat(l.status," ").concat(l.statusText,": ").concat(f))),r.next=35;break;case 32:r.prev=32,r.t0=r.catch(1),r.t0 instanceof Error&&a(r.t0);case 35:case"end":return r.stop()}}),r,null,[[1,32]])})));return function(e,t){return r.apply(this,arguments)}}(),{})}(t,a,o,u,c,l),this._rpcRequest=(d=this._rpcClient,function(e,t){return new Promise((function(r,n){d.request(e,t,(function(e,t){e?n(e):r(t)}))}))}),this._rpcBatchRequest=function(e){return function(t){return new Promise((function(r,n){0===t.length&&r([]);var i=t.map((function(t){return e.request(t.methodName,t.args)}));e.request(i,(function(e,t){e?n(e):r(t)}))}))}}(this._rpcClient),this._rpcWebSocket=new _t(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}return(0,i.Z)(e,[{key:"commitment",get:function(){return this._commitment}},{key:"rpcEndpoint",get:function(){return this._rpcEndpoint}},{key:"getBalanceAndContext",value:function(){var e=(0,s.Z)(h().mark((function e(t,r){var n,i,a,o,s,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ut(r),i=n.commitment,a=n.config,o=this._buildArgs([t.toBase58()],i,void 0,a),e.next=4,this._rpcRequest("getBalance",o);case 4:if(s=e.sent,!("error"in(u=(0,A.Ue)(s,Gt((0,A.Rx)()))))){e.next=8;break}throw new wt(u.error,"failed to get balance for ".concat(t.toBase58()));case 8:return e.abrupt("return",u.result);case 9:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getBalance",value:function(){var e=(0,s.Z)(h().mark((function e(t,r){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getBalanceAndContext(t,r).then((function(e){return e.value})).catch((function(e){throw new Error("failed to get balance of account "+t.toBase58()+": "+e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getBlockTime",value:function(){var e=(0,s.Z)(h().mark((function e(t){var r,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("getBlockTime",[t]);case 2:if(r=e.sent,!("error"in(n=(0,A.Ue)(r,Mt((0,A.AG)((0,A.Rx)())))))){e.next=6;break}throw new wt(n.error,"failed to get block time for slot ".concat(t));case 6:return e.abrupt("return",n.result);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMinimumLedgerSlot",value:function(){var e=(0,s.Z)(h().mark((function e(){var t,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("minimumLedgerSlot",[]);case 2:if(t=e.sent,!("error"in(r=(0,A.Ue)(t,Mt((0,A.Rx)()))))){e.next=6;break}throw new wt(r.error,"failed to get minimum ledger slot");case 6:return e.abrupt("return",r.result);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getFirstAvailableBlock",value:function(){var e=(0,s.Z)(h().mark((function e(){var t,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("getFirstAvailableBlock",[]);case 2:if(t=e.sent,!("error"in(r=(0,A.Ue)(t,hr)))){e.next=6;break}throw new wt(r.error,"failed to get first available block");case 6:return e.abrupt("return",r.result);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getSupply",value:function(){var e=(0,s.Z)(h().mark((function e(t){var r,n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={},r="string"===typeof t?{commitment:t}:t?Kt(Kt({},t),{},{commitment:t&&t.commitment||this.commitment}):{commitment:this.commitment},e.next=4,this._rpcRequest("getSupply",[r]);case 4:if(n=e.sent,!("error"in(i=(0,A.Ue)(n,fr)))){e.next=8;break}throw new wt(i.error,"failed to get supply");case 8:return e.abrupt("return",i.result);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTokenSupply",value:function(){var e=(0,s.Z)(h().mark((function e(t,r){var n,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._buildArgs([t.toBase58()],r),e.next=3,this._rpcRequest("getTokenSupply",n);case 3:if(i=e.sent,!("error"in(a=(0,A.Ue)(i,Gt(pr))))){e.next=7;break}throw new wt(a.error,"failed to get token supply");case 7:return e.abrupt("return",a.result);case 8:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getTokenAccountBalance",value:function(){var e=(0,s.Z)(h().mark((function e(t,r){var n,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._buildArgs([t.toBase58()],r),e.next=3,this._rpcRequest("getTokenAccountBalance",n);case 3:if(i=e.sent,!("error"in(a=(0,A.Ue)(i,Gt(pr))))){e.next=7;break}throw new wt(a.error,"failed to get token account balance");case 7:return e.abrupt("return",a.result);case 8:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getTokenAccountsByOwner",value:function(){var e=(0,s.Z)(h().mark((function e(t,r,n){var i,a,o,s,u,c,l;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ut(n),a=i.commitment,o=i.config,s=[t.toBase58()],"mint"in r?s.push({mint:r.mint.toBase58()}):s.push({programId:r.programId.toBase58()}),u=this._buildArgs(s,a,"base64",o),e.next=6,this._rpcRequest("getTokenAccountsByOwner",u);case 6:if(c=e.sent,!("error"in(l=(0,A.Ue)(c,kr)))){e.next=10;break}throw new wt(l.error,"failed to get token accounts owned by account ".concat(t.toBase58()));case 10:return e.abrupt("return",l.result);case 11:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"getParsedTokenAccountsByOwner",value:function(){var e=(0,s.Z)(h().mark((function e(t,r,n){var i,a,o,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=[t.toBase58()],"mint"in r?i.push({mint:r.mint.toBase58()}):i.push({programId:r.programId.toBase58()}),a=this._buildArgs(i,n,"jsonParsed"),e.next=5,this._rpcRequest("getTokenAccountsByOwner",a);case 5:if(o=e.sent,!("error"in(s=(0,A.Ue)(o,gr)))){e.next=9;break}throw new wt(s.error,"failed to get token accounts owned by account ".concat(t.toBase58()));case 9:return e.abrupt("return",s.result);case 10:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"getLargestAccounts",value:function(){var e=(0,s.Z)(h().mark((function e(t){var r,n,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Kt(Kt({},t),{},{commitment:t&&t.commitment||this.commitment}),n=r.filter||r.commitment?[r]:[],e.next=4,this._rpcRequest("getLargestAccounts",n);case 4:if(i=e.sent,!("error"in(a=(0,A.Ue)(i,mr)))){e.next=8;break}throw new wt(a.error,"failed to get largest accounts");case 8:return e.abrupt("return",a.result);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTokenLargestAccounts",value:function(){var e=(0,s.Z)(h().mark((function e(t,r){var n,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._buildArgs([t.toBase58()],r),e.next=3,this._rpcRequest("getTokenLargestAccounts",n);case 3:if(i=e.sent,!("error"in(a=(0,A.Ue)(i,yr)))){e.next=7;break}throw new wt(a.error,"failed to get token largest accounts");case 7:return e.abrupt("return",a.result);case 8:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getAccountInfoAndContext",value:function(){var e=(0,s.Z)(h().mark((function e(t,r){var n,i,a,o,s,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ut(r),i=n.commitment,a=n.config,o=this._buildArgs([t.toBase58()],i,"base64",a),e.next=4,this._rpcRequest("getAccountInfo",o);case 4:if(s=e.sent,!("error"in(u=(0,A.Ue)(s,Gt((0,A.AG)(vr)))))){e.next=8;break}throw new wt(u.error,"failed to get info about account ".concat(t.toBase58()));case 8:return e.abrupt("return",u.result);case 9:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getParsedAccountInfo",value:function(){var e=(0,s.Z)(h().mark((function e(t,r){var n,i,a,o,s,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ut(r),i=n.commitment,a=n.config,o=this._buildArgs([t.toBase58()],i,"jsonParsed",a),e.next=4,this._rpcRequest("getAccountInfo",o);case 4:if(s=e.sent,!("error"in(u=(0,A.Ue)(s,Gt((0,A.AG)(Sr)))))){e.next=8;break}throw new wt(u.error,"failed to get info about account ".concat(t.toBase58()));case 8:return e.abrupt("return",u.result);case 9:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getAccountInfo",value:function(){var e=(0,s.Z)(h().mark((function e(t,r){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.getAccountInfoAndContext(t,r);case 3:return n=e.sent,e.abrupt("return",n.value);case 7:throw e.prev=7,e.t0=e.catch(0),new Error("failed to get info about account "+t.toBase58()+": "+e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getMultipleParsedAccounts",value:function(){var e=(0,s.Z)(h().mark((function e(t,r){var n,i,a,o,s,u,c;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ut(r),i=n.commitment,a=n.config,o=t.map((function(e){return e.toBase58()})),s=this._buildArgs([o],i,"jsonParsed",a),e.next=5,this._rpcRequest("getMultipleAccounts",s);case 5:if(u=e.sent,!("error"in(c=(0,A.Ue)(u,Gt((0,A.IX)((0,A.AG)(Sr))))))){e.next=9;break}throw new wt(c.error,"failed to get info for accounts ".concat(o));case 9:return e.abrupt("return",c.result);case 10:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getMultipleAccountsInfoAndContext",value:function(){var e=(0,s.Z)(h().mark((function e(t,r){var n,i,a,o,s,u,c;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ut(r),i=n.commitment,a=n.config,o=t.map((function(e){return e.toBase58()})),s=this._buildArgs([o],i,"base64",a),e.next=5,this._rpcRequest("getMultipleAccounts",s);case 5:if(u=e.sent,!("error"in(c=(0,A.Ue)(u,Gt((0,A.IX)((0,A.AG)(vr))))))){e.next=9;break}throw new wt(c.error,"failed to get info for accounts ".concat(o));case 9:return e.abrupt("return",c.result);case 10:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getMultipleAccountsInfo",value:function(){var e=(0,s.Z)(h().mark((function e(t,r){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMultipleAccountsInfoAndContext(t,r);case 2:return n=e.sent,e.abrupt("return",n.value);case 4:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getStakeActivation",value:function(){var e=(0,s.Z)(h().mark((function e(t,r,n){var i,a,o,s,u,c;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ut(r),a=i.commitment,o=i.config,s=this._buildArgs([t.toBase58()],a,void 0,Kt(Kt({},o),{},{epoch:null!=n?n:null===o||void 0===o?void 0:o.epoch})),e.next=4,this._rpcRequest("getStakeActivation",s);case 4:if(u=e.sent,!("error"in(c=(0,A.Ue)(u,Mt(_r))))){e.next=8;break}throw new wt(c.error,"failed to get Stake Activation ".concat(t.toBase58()));case 8:return e.abrupt("return",c.result);case 9:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"getProgramAccounts",value:function(){var e=(0,s.Z)(h().mark((function e(t,r){var n,i,a,o,s,u,c,l,d,f;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ut(r),i=n.commitment,a=n.config,s=(o=a||{}).encoding,u=(0,_.Z)(o,Tt),c=this._buildArgs([t.toBase58()],i,s||"base64",u),e.next=5,this._rpcRequest("getProgramAccounts",c);case 5:if(l=e.sent,d=(0,A.IX)(wr),!("error"in(f=!0===u.withContext?(0,A.Ue)(l,Gt(d)):(0,A.Ue)(l,Mt(d))))){e.next=10;break}throw new wt(f.error,"failed to get accounts owned by program ".concat(t.toBase58()));case 10:return e.abrupt("return",f.result);case 11:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getParsedProgramAccounts",value:function(){var e=(0,s.Z)(h().mark((function e(t,r){var n,i,a,o,s,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ut(r),i=n.commitment,a=n.config,o=this._buildArgs([t.toBase58()],i,"jsonParsed",a),e.next=4,this._rpcRequest("getProgramAccounts",o);case 4:if(s=e.sent,!("error"in(u=(0,A.Ue)(s,Mt((0,A.IX)(Ir)))))){e.next=8;break}throw new wt(u.error,"failed to get accounts owned by program ".concat(t.toBase58()));case 8:return e.abrupt("return",u.result);case 9:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"confirmTransaction",value:function(){var e=(0,s.Z)(h().mark((function e(t,r){var n,i,a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!=typeof t){e.next=4;break}n=t,e.next=8;break;case 4:if(null===(i=(a=t).abortSignal)||void 0===i||!i.aborted){e.next=7;break}return e.abrupt("return",Promise.reject(a.abortSignal.reason));case 7:n=a.signature;case 8:e.prev=8,o=k().decode(n),e.next=15;break;case 12:throw e.prev=12,e.t0=e.catch(8),new Error("signature must be base58 encoded: "+n);case 15:if(ke(64===o.length,"signature has invalid length"),"string"!==typeof t){e.next=22;break}return e.next=19,this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:r||this.commitment,signature:n});case 19:return e.abrupt("return",e.sent);case 22:if(!("lastValidBlockHeight"in t)){e.next=28;break}return e.next=25,this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:r||this.commitment,strategy:t});case 25:return e.abrupt("return",e.sent);case 28:return e.next=30,this.confirmTransactionUsingDurableNonceStrategy({commitment:r||this.commitment,strategy:t});case 30:return e.abrupt("return",e.sent);case 31:case"end":return e.stop()}}),e,this,[[8,12]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getCancellationPromise",value:function(e){return new Promise((function(t,r){null!=e&&(e.aborted?r(e.reason):e.addEventListener("abort",(function(){r(e.reason)})))}))}},{key:"getTransactionConfirmationPromise",value:function(e){var t,r,n=this,i=e.commitment,a=e.signature,o=!1;return{abortConfirmation:function(){r&&(r(),r=void 0),null!=t&&(n.removeSignatureListener(t),t=void 0)},confirmationPromise:new Promise((function(e,u){try{t=n.onSignature(a,(function(r,n){t=void 0;var i={context:n,value:r};e({__type:Pe.PROCESSED,response:i})}),i);var c=new Promise((function(e){null==t?e():r=n._onSubscriptionStateChange(t,(function(t){"subscribed"===t&&e()}))}));(0,s.Z)(h().mark((function t(){var r,s,l;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c;case 2:if(!o){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,n.getSignatureStatus(a);case 6:if(r=t.sent,!o){t.next=9;break}return t.abrupt("return");case 9:if(null!=r){t.next=11;break}return t.abrupt("return");case 11:if(s=r.context,null!=(l=r.value)){t.next=14;break}return t.abrupt("return");case 14:if(null===l||void 0===l||!l.err){t.next=18;break}u(l.err),t.next=29;break;case 18:t.t0=i,t.next="confirmed"===t.t0||"single"===t.t0||"singleGossip"===t.t0?21:"finalized"===t.t0||"max"===t.t0||"root"===t.t0?24:("processed"===t.t0||t.t0,27);break;case 21:if("processed"!==l.confirmationStatus){t.next=23;break}return t.abrupt("return");case 23:return t.abrupt("break",27);case 24:if("processed"!==l.confirmationStatus&&"confirmed"!==l.confirmationStatus){t.next=26;break}return t.abrupt("return");case 26:return t.abrupt("break",27);case 27:o=!0,e({__type:Pe.PROCESSED,response:{context:s,value:l}});case 29:case"end":return t.stop()}}),t)})))()}catch(l){u(l)}}))}}},{key:"confirmTransactionUsingBlockHeightExceedanceStrategy",value:function(){var e=(0,s.Z)(h().mark((function e(t){var r,n,i,a,o,u,c,l,d,f,p,y,k,b=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.commitment,n=t.strategy,i=n.abortSignal,a=n.lastValidBlockHeight,o=n.signature,u=!1,c=new Promise((function(e){var t=function(){var e=(0,s.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.getBlockHeight(r);case 3:return t=e.sent,e.abrupt("return",t);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",-1);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();(0,s.Z)(h().mark((function r(){var n;return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t();case 2:if(n=r.sent,!u){r.next=5;break}return r.abrupt("return");case 5:if(!(n<=a)){r.next=17;break}return r.next=8,Fe(1e3);case 8:if(!u){r.next=10;break}return r.abrupt("return");case 10:return r.next=12,t();case 12:if(n=r.sent,!u){r.next=15;break}return r.abrupt("return");case 15:r.next=5;break;case 17:e({__type:Pe.BLOCKHEIGHT_EXCEEDED});case 18:case"end":return r.stop()}}),r)})))()})),l=this.getTransactionConfirmationPromise({commitment:r,signature:o}),d=l.abortConfirmation,f=l.confirmationPromise,p=this.getCancellationPromise(i),e.prev=5,e.next=8,Promise.race([p,f,c]);case 8:if((k=e.sent).__type!==Pe.PROCESSED){e.next=13;break}y=k.response,e.next=14;break;case 13:throw new ie(o);case 14:return e.prev=14,u=!0,d(),e.finish(14);case 18:return e.abrupt("return",y);case 19:case"end":return e.stop()}}),e,this,[[5,,14,18]])})));return function(t){return e.apply(this,arguments)}}()},{key:"confirmTransactionUsingDurableNonceStrategy",value:function(){var e=(0,s.Z)(h().mark((function e(t){var r,n,i,a,o,u,c,l,d,f,p,y,k,b,g,m,v,w,x,S,I,_=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.commitment,n=t.strategy,i=n.abortSignal,a=n.minContextSlot,o=n.nonceAccountPubkey,u=n.nonceValue,c=n.signature,l=!1,d=new Promise((function(e){var t=u,n=null,i=function(){var e=(0,s.Z)(h().mark((function e(){var i,s,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_.getNonceAndContext(o,{commitment:r,minContextSlot:a});case 3:return i=e.sent,s=i.context,u=i.value,n=s.slot,e.abrupt("return",null===u||void 0===u?void 0:u.nonce);case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",t);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();(0,s.Z)(h().mark((function r(){return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,i();case 2:if(t=r.sent,!l){r.next=5;break}return r.abrupt("return");case 5:if(u===t){r.next=9;break}return e({__type:Pe.NONCE_INVALID,slotInWhichNonceDidAdvance:n}),r.abrupt("return");case 9:return r.next=11,Fe(2e3);case 11:if(!l){r.next=13;break}return r.abrupt("return");case 13:return r.next=15,i();case 15:if(t=r.sent,!l){r.next=18;break}return r.abrupt("return");case 18:r.next=5;break;case 20:case"end":return r.stop()}}),r)})))()})),f=this.getTransactionConfirmationPromise({commitment:r,signature:c}),p=f.abortConfirmation,y=f.confirmationPromise,k=this.getCancellationPromise(i),e.prev=5,e.next=8,Promise.race([k,y,d]);case 8:if((g=e.sent).__type!==Pe.PROCESSED){e.next=13;break}b=g.response,e.next=47;break;case 13:return e.next=16,this.getSignatureStatus(c);case 16:if(null!=(x=e.sent)){e.next=19;break}return e.abrupt("break",27);case 19:if(!(x.context.slot<(null!==(w=g.slotInWhichNonceDidAdvance)&&void 0!==w?w:a))){e.next=23;break}return e.next=22,Fe(400);case 22:return e.abrupt("continue",13);case 23:return v=x,e.abrupt("break",27);case 27:if(null===(m=v)||void 0===m||!m.value){e.next=46;break}S=r||"finalized",I=v.value.confirmationStatus,e.t0=S,e.next="processed"===e.t0||"recent"===e.t0?33:"confirmed"===e.t0||"single"===e.t0||"singleGossip"===e.t0?36:"finalized"===e.t0||"max"===e.t0||"root"===e.t0?39:42;break;case 33:if("processed"===I||"confirmed"===I||"finalized"===I){e.next=35;break}throw new oe(c);case 35:return e.abrupt("break",43);case 36:if("confirmed"===I||"finalized"===I){e.next=38;break}throw new oe(c);case 38:return e.abrupt("break",43);case 39:if("finalized"===I){e.next=41;break}throw new oe(c);case 41:return e.abrupt("break",43);case 42:case 43:b={context:v.context,value:{err:v.value.err}},e.next=47;break;case 46:throw new oe(c);case 47:return e.prev=47,l=!0,p(),e.finish(47);case 51:return e.abrupt("return",b);case 52:case"end":return e.stop()}}),e,this,[[5,,47,51]])})));return function(t){return e.apply(this,arguments)}}()},{key:"confirmTransactionUsingLegacyTimeoutStrategy",value:function(){var e=(0,s.Z)(h().mark((function e(t){var r,n,i,a,o,s,u,c,l,d=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.commitment,n=t.signature,a=new Promise((function(e){var t=d._confirmTransactionInitialTimeout||6e4;switch(r){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":t=d._confirmTransactionInitialTimeout||3e4}i=setTimeout((function(){return e({__type:Pe.TIMED_OUT,timeoutMs:t})}),t)})),o=this.getTransactionConfirmationPromise({commitment:r,signature:n}),s=o.abortConfirmation,u=o.confirmationPromise,e.prev=3,e.next=6,Promise.race([u,a]);case 6:if((l=e.sent).__type!==Pe.PROCESSED){e.next=11;break}c=l.response,e.next=12;break;case 11:throw new ae(n,l.timeoutMs/1e3);case 12:return e.prev=12,clearTimeout(i),s(),e.finish(12);case 16:return e.abrupt("return",c);case 17:case"end":return e.stop()}}),e,this,[[3,,12,16]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getClusterNodes",value:function(){var e=(0,s.Z)(h().mark((function e(){var t,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("getClusterNodes",[]);case 2:if(t=e.sent,!("error"in(r=(0,A.Ue)(t,Mt((0,A.IX)(zr)))))){e.next=6;break}throw new wt(r.error,"failed to get cluster nodes");case 6:return e.abrupt("return",r.result);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getVoteAccounts",value:function(){var e=(0,s.Z)(h().mark((function e(t){var r,n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this._buildArgs([],t),e.next=3,this._rpcRequest("getVoteAccounts",r);case 3:if(n=e.sent,!("error"in(i=(0,A.Ue)(n,Nr)))){e.next=7;break}throw new wt(i.error,"failed to get vote accounts");case 7:return e.abrupt("return",i.result);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getSlot",value:function(){var e=(0,s.Z)(h().mark((function e(t){var r,n,i,a,o,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ut(t),n=r.commitment,i=r.config,a=this._buildArgs([],n,void 0,i),e.next=4,this._rpcRequest("getSlot",a);case 4:if(o=e.sent,!("error"in(s=(0,A.Ue)(o,Mt((0,A.Rx)()))))){e.next=8;break}throw new wt(s.error,"failed to get slot");case 8:return e.abrupt("return",s.result);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getSlotLeader",value:function(){var e=(0,s.Z)(h().mark((function e(t){var r,n,i,a,o,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ut(t),n=r.commitment,i=r.config,a=this._buildArgs([],n,void 0,i),e.next=4,this._rpcRequest("getSlotLeader",a);case 4:if(o=e.sent,!("error"in(s=(0,A.Ue)(o,Mt((0,A.Z_)()))))){e.next=8;break}throw new wt(s.error,"failed to get slot leader");case 8:return e.abrupt("return",s.result);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getSlotLeaders",value:function(){var e=(0,s.Z)(h().mark((function e(t,r){var n,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[t,r],e.next=3,this._rpcRequest("getSlotLeaders",n);case 3:if(i=e.sent,!("error"in(a=(0,A.Ue)(i,Mt((0,A.IX)(Lt)))))){e.next=7;break}throw new wt(a.error,"failed to get slot leaders");case 7:return e.abrupt("return",a.result);case 8:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getSignatureStatus",value:function(){var e=(0,s.Z)(h().mark((function e(t,r){var n,i,a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getSignatureStatuses([t],r);case 2:return n=e.sent,i=n.context,ke(1===(a=n.value).length),o=a[0],e.abrupt("return",{context:i,value:o});case 8:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getSignatureStatuses",value:function(){var e=(0,s.Z)(h().mark((function e(t,r){var n,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[t],r&&n.push(r),e.next=4,this._rpcRequest("getSignatureStatuses",n);case 4:if(i=e.sent,!("error"in(a=(0,A.Ue)(i,jr)))){e.next=8;break}throw new wt(a.error,"failed to get signature status");case 8:return e.abrupt("return",a.result);case 9:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getTransactionCount",value:function(){var e=(0,s.Z)(h().mark((function e(t){var r,n,i,a,o,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ut(t),n=r.commitment,i=r.config,a=this._buildArgs([],n,void 0,i),e.next=4,this._rpcRequest("getTransactionCount",a);case 4:if(o=e.sent,!("error"in(s=(0,A.Ue)(o,Mt((0,A.Rx)()))))){e.next=8;break}throw new wt(s.error,"failed to get transaction count");case 8:return e.abrupt("return",s.result);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTotalSupply",value:function(){var e=(0,s.Z)(h().mark((function e(t){var r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getSupply({commitment:t,excludeNonCirculatingAccountsList:!0});case 2:return r=e.sent,e.abrupt("return",r.value.total);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getInflationGovernor",value:function(){var e=(0,s.Z)(h().mark((function e(t){var r,n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this._buildArgs([],t),e.next=3,this._rpcRequest("getInflationGovernor",r);case 3:if(n=e.sent,!("error"in(i=(0,A.Ue)(n,or)))){e.next=7;break}throw new wt(i.error,"failed to get inflation");case 7:return e.abrupt("return",i.result);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getInflationReward",value:function(){var e=(0,s.Z)(h().mark((function e(t,r,n){var i,a,o,s,u,c;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ut(n),a=i.commitment,o=i.config,s=this._buildArgs([t.map((function(e){return e.toBase58()}))],a,void 0,Kt(Kt({},o),{},{epoch:null!=r?r:null===o||void 0===o?void 0:o.epoch})),e.next=4,this._rpcRequest("getInflationReward",s);case 4:if(u=e.sent,!("error"in(c=(0,A.Ue)(u,Ht)))){e.next=8;break}throw new wt(c.error,"failed to get inflation reward");case 8:return e.abrupt("return",c.result);case 9:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"getInflationRate",value:function(){var e=(0,s.Z)(h().mark((function e(){var t,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("getInflationRate",[]);case 2:if(t=e.sent,!("error"in(r=(0,A.Ue)(t,sr)))){e.next=6;break}throw new wt(r.error,"failed to get inflation rate");case 6:return e.abrupt("return",r.result);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getEpochInfo",value:function(){var e=(0,s.Z)(h().mark((function e(t){var r,n,i,a,o,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ut(t),n=r.commitment,i=r.config,a=this._buildArgs([],n,void 0,i),e.next=4,this._rpcRequest("getEpochInfo",a);case 4:if(o=e.sent,!("error"in(s=(0,A.Ue)(o,cr)))){e.next=8;break}throw new wt(s.error,"failed to get epoch info");case 8:return e.abrupt("return",s.result);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getEpochSchedule",value:function(){var e=(0,s.Z)(h().mark((function e(){var t,r,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("getEpochSchedule",[]);case 2:if(t=e.sent,!("error"in(r=(0,A.Ue)(t,lr)))){e.next=6;break}throw new wt(r.error,"failed to get epoch schedule");case 6:return n=r.result,e.abrupt("return",new bt(n.slotsPerEpoch,n.leaderScheduleSlotOffset,n.warmup,n.firstNormalEpoch,n.firstNormalSlot));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getLeaderSchedule",value:function(){var e=(0,s.Z)(h().mark((function e(){var t,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("getLeaderSchedule",[]);case 2:if(t=e.sent,!("error"in(r=(0,A.Ue)(t,dr)))){e.next=6;break}throw new wt(r.error,"failed to get leader schedule");case 6:return e.abrupt("return",r.result);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getMinimumBalanceForRentExemption",value:function(){var e=(0,s.Z)(h().mark((function e(t,r){var n,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._buildArgs([t],r),e.next=3,this._rpcRequest("getMinimumBalanceForRentExemption",n);case 3:if(i=e.sent,!("error"in(a=(0,A.Ue)(i,Mr)))){e.next=8;break}return console.warn("Unable to fetch minimum balance for rent exemption"),e.abrupt("return",0);case 8:return e.abrupt("return",a.result);case 9:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getRecentBlockhashAndContext",value:function(){var e=(0,s.Z)(h().mark((function e(t){var r,n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this._buildArgs([],t),e.next=3,this._rpcRequest("getRecentBlockhash",r);case 3:if(n=e.sent,!("error"in(i=(0,A.Ue)(n,bn)))){e.next=7;break}throw new wt(i.error,"failed to get recent blockhash");case 7:return e.abrupt("return",i.result);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getRecentPerformanceSamples",value:function(){var e=(0,s.Z)(h().mark((function e(t){var r,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("getRecentPerformanceSamples",t?[t]:[]);case 2:if(r=e.sent,!("error"in(n=(0,A.Ue)(r,wn)))){e.next=6;break}throw new wt(n.error,"failed to get recent performance samples");case 6:return e.abrupt("return",n.result);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getFeeCalculatorForBlockhash",value:function(){var e=(0,s.Z)(h().mark((function e(t,r){var n,i,a,o,s,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._buildArgs([t],r),e.next=3,this._rpcRequest("getFeeCalculatorForBlockhash",n);case 3:if(i=e.sent,!("error"in(a=(0,A.Ue)(i,xn)))){e.next=7;break}throw new wt(a.error,"failed to get fee calculator");case 7:return o=a.result,s=o.context,u=o.value,e.abrupt("return",{context:s,value:null!==u?u.feeCalculator:null});case 9:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getFeeForMessage",value:function(){var e=(0,s.Z)(h().mark((function e(t,r){var n,i,a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=q(t.serialize()).toString("base64"),i=this._buildArgs([n],r),e.next=4,this._rpcRequest("getFeeForMessage",i);case 4:if(a=e.sent,!("error"in(o=(0,A.Ue)(a,Gt((0,A.AG)((0,A.Rx)())))))){e.next=8;break}throw new wt(o.error,"failed to get fee for message");case 8:if(null!==o.result){e.next=10;break}throw new Error("invalid blockhash");case 10:return e.abrupt("return",o.result);case 11:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getRecentPrioritizationFees",value:function(){var e=(0,s.Z)(h().mark((function e(t){var r,n,i,a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null===t||void 0===t||null===(r=t.lockedWritableAccounts)||void 0===r?void 0:r.map((function(e){return e.toBase58()})),i=null!==n&&void 0!==n&&n.length?[n]:[],e.next=4,this._rpcRequest("getRecentPrioritizationFees",i);case 4:if(a=e.sent,!("error"in(o=(0,A.Ue)(a,ur)))){e.next=8;break}throw new wt(o.error,"failed to get recent prioritization fees");case 8:return e.abrupt("return",o.result);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getRecentBlockhash",value:function(){var e=(0,s.Z)(h().mark((function e(t){var r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.getRecentBlockhashAndContext(t);case 3:return r=e.sent,e.abrupt("return",r.value);case 7:throw e.prev=7,e.t0=e.catch(0),new Error("failed to get recent blockhash: "+e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getLatestBlockhash",value:function(){var e=(0,s.Z)(h().mark((function e(t){var r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.getLatestBlockhashAndContext(t);case 3:return r=e.sent,e.abrupt("return",r.value);case 7:throw e.prev=7,e.t0=e.catch(0),new Error("failed to get recent blockhash: "+e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getLatestBlockhashAndContext",value:function(){var e=(0,s.Z)(h().mark((function e(t){var r,n,i,a,o,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ut(t),n=r.commitment,i=r.config,a=this._buildArgs([],n,void 0,i),e.next=4,this._rpcRequest("getLatestBlockhash",a);case 4:if(o=e.sent,!("error"in(s=(0,A.Ue)(o,gn)))){e.next=8;break}throw new wt(s.error,"failed to get latest blockhash");case 8:return e.abrupt("return",s.result);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"isBlockhashValid",value:function(){var e=(0,s.Z)(h().mark((function e(t,r){var n,i,a,o,s,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ut(r),i=n.commitment,a=n.config,o=this._buildArgs([t],i,void 0,a),e.next=4,this._rpcRequest("isBlockhashValid",o);case 4:if(s=e.sent,!("error"in(u=(0,A.Ue)(s,mn)))){e.next=8;break}throw new wt(u.error,"failed to determine if the blockhash `"+t+"`is valid");case 8:return e.abrupt("return",u.result);case 9:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getVersion",value:function(){var e=(0,s.Z)(h().mark((function e(){var t,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("getVersion",[]);case 2:if(t=e.sent,!("error"in(r=(0,A.Ue)(t,Mt(nr))))){e.next=6;break}throw new wt(r.error,"failed to get version");case 6:return e.abrupt("return",r.result);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getGenesisHash",value:function(){var e=(0,s.Z)(h().mark((function e(){var t,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("getGenesisHash",[]);case 2:if(t=e.sent,!("error"in(r=(0,A.Ue)(t,Mt((0,A.Z_)()))))){e.next=6;break}throw new wt(r.error,"failed to get genesis hash");case 6:return e.abrupt("return",r.result);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getBlock",value:function(){var e=(0,s.Z)(h().mark((function e(t,r){var n,i,a,o,s,u,c,l,d;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ut(r),i=n.commitment,a=n.config,o=this._buildArgsAtLeastConfirmed([t],i,void 0,a),e.next=4,this._rpcRequest("getBlock",o);case 4:s=e.sent,e.prev=5,e.t0=null===a||void 0===a?void 0:a.transactionDetails,e.next="accounts"===e.t0?9:"none"===e.t0?13:17;break;case 9:if(!("error"in(u=(0,A.Ue)(s,cn)))){e.next=12;break}throw u.error;case 12:return e.abrupt("return",u.result);case 13:if(!("error"in(c=(0,A.Ue)(s,un)))){e.next=16;break}throw c.error;case 16:return e.abrupt("return",c.result);case 17:if(!("error"in(l=(0,A.Ue)(s,sn)))){e.next=20;break}throw l.error;case 20:return d=l.result,e.abrupt("return",d?Kt(Kt({},d),{},{transactions:d.transactions.map((function(e){var t=e.transaction,r=e.meta,n=e.version;return{meta:r,transaction:Kt(Kt({},t),{},{message:Vt(n,t.message)}),version:n}}))}):null);case 22:e.next=27;break;case 24:throw e.prev=24,e.t1=e.catch(5),new wt(e.t1,"failed to get confirmed block");case 27:case"end":return e.stop()}}),e,this,[[5,24]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getParsedBlock",value:function(){var e=(0,s.Z)(h().mark((function e(t,r){var n,i,a,o,s,u,c,l;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ut(r),i=n.commitment,a=n.config,o=this._buildArgsAtLeastConfirmed([t],i,"jsonParsed",a),e.next=4,this._rpcRequest("getBlock",o);case 4:s=e.sent,e.prev=5,e.t0=null===a||void 0===a?void 0:a.transactionDetails,e.next="accounts"===e.t0?9:"none"===e.t0?13:17;break;case 9:if(!("error"in(u=(0,A.Ue)(s,dn)))){e.next=12;break}throw u.error;case 12:return e.abrupt("return",u.result);case 13:if(!("error"in(c=(0,A.Ue)(s,hn)))){e.next=16;break}throw c.error;case 16:return e.abrupt("return",c.result);case 17:if(!("error"in(l=(0,A.Ue)(s,ln)))){e.next=20;break}throw l.error;case 20:return e.abrupt("return",l.result);case 21:e.next=26;break;case 23:throw e.prev=23,e.t1=e.catch(5),new wt(e.t1,"failed to get block");case 26:case"end":return e.stop()}}),e,this,[[5,23]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getBlockProduction",value:function(){var e=(0,s.Z)(h().mark((function e(t){var r,n,i,a,o,s,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"string"===typeof t?n=t:t&&(i=t.commitment,a=(0,_.Z)(t,Zt),n=i,r=a),o=this._buildArgs([],n,"base64",r),e.next=4,this._rpcRequest("getBlockProduction",o);case 4:if(s=e.sent,!("error"in(u=(0,A.Ue)(s,ar)))){e.next=8;break}throw new wt(u.error,"failed to get block production information");case 8:return e.abrupt("return",u.result);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTransaction",value:function(){var e=(0,s.Z)(h().mark((function e(t,r){var n,i,a,o,s,u,c;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ut(r),i=n.commitment,a=n.config,o=this._buildArgsAtLeastConfirmed([t],i,void 0,a),e.next=4,this._rpcRequest("getTransaction",o);case 4:if(s=e.sent,!("error"in(u=(0,A.Ue)(s,yn)))){e.next=8;break}throw new wt(u.error,"failed to get transaction");case 8:if(c=u.result){e.next=11;break}return e.abrupt("return",c);case 11:return e.abrupt("return",Kt(Kt({},c),{},{transaction:Kt(Kt({},c.transaction),{},{message:Vt(c.version,c.transaction.message)})}));case 12:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getParsedTransaction",value:function(){var e=(0,s.Z)(h().mark((function e(t,r){var n,i,a,o,s,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ut(r),i=n.commitment,a=n.config,o=this._buildArgsAtLeastConfirmed([t],i,"jsonParsed",a),e.next=4,this._rpcRequest("getTransaction",o);case 4:if(s=e.sent,!("error"in(u=(0,A.Ue)(s,kn)))){e.next=8;break}throw new wt(u.error,"failed to get transaction");case 8:return e.abrupt("return",u.result);case 9:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getParsedTransactions",value:function(){var e=(0,s.Z)(h().mark((function e(t,r){var n,i,a,o,s,u,c=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ut(r),i=n.commitment,a=n.config,o=t.map((function(e){return{methodName:"getTransaction",args:c._buildArgsAtLeastConfirmed([e],i,"jsonParsed",a)}})),e.next=4,this._rpcBatchRequest(o);case 4:return s=e.sent,u=s.map((function(e){var t=(0,A.Ue)(e,kn);if("error"in t)throw new wt(t.error,"failed to get transactions");return t.result})),e.abrupt("return",u);case 7:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getTransactions",value:function(){var e=(0,s.Z)(h().mark((function e(t,r){var n,i,a,o,s,u,c=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ut(r),i=n.commitment,a=n.config,o=t.map((function(e){return{methodName:"getTransaction",args:c._buildArgsAtLeastConfirmed([e],i,void 0,a)}})),e.next=4,this._rpcBatchRequest(o);case 4:return s=e.sent,u=s.map((function(e){var t=(0,A.Ue)(e,yn);if("error"in t)throw new wt(t.error,"failed to get transactions");var r=t.result;return r?Kt(Kt({},r),{},{transaction:Kt(Kt({},r.transaction),{},{message:Vt(r.version,r.transaction.message)})}):r})),e.abrupt("return",u);case 7:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getConfirmedBlock",value:function(){var e=(0,s.Z)(h().mark((function e(t,r){var n,i,a,o,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._buildArgsAtLeastConfirmed([t],r),e.next=3,this._rpcRequest("getConfirmedBlock",n);case 3:if(i=e.sent,!("error"in(a=(0,A.Ue)(i,fn)))){e.next=7;break}throw new wt(a.error,"failed to get confirmed block");case 7:if(o=a.result){e.next=10;break}throw new Error("Confirmed block "+t+" not found");case 10:return s=Kt(Kt({},o),{},{transactions:o.transactions.map((function(e){var t=e.transaction,r=e.meta,n=new ve(t.message);return{meta:r,transaction:Kt(Kt({},t),{},{message:n})}}))}),e.abrupt("return",Kt(Kt({},s),{},{transactions:s.transactions.map((function(e){var t=e.transaction;return{meta:e.meta,transaction:Te.populate(t.message,t.signatures)}}))}));case 12:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getBlocks",value:function(){var e=(0,s.Z)(h().mark((function e(t,r,n){var i,a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this._buildArgsAtLeastConfirmed(void 0!==r?[t,r]:[t],n),e.next=3,this._rpcRequest("getBlocks",i);case 3:if(a=e.sent,!("error"in(o=(0,A.Ue)(a,Mt((0,A.IX)((0,A.Rx)())))))){e.next=7;break}throw new wt(o.error,"failed to get blocks");case 7:return e.abrupt("return",o.result);case 8:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"getBlockSignatures",value:function(){var e=(0,s.Z)(h().mark((function e(t,r){var n,i,a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._buildArgsAtLeastConfirmed([t],r,void 0,{transactionDetails:"signatures",rewards:!1}),e.next=3,this._rpcRequest("getBlock",n);case 3:if(i=e.sent,!("error"in(a=(0,A.Ue)(i,pn)))){e.next=7;break}throw new wt(a.error,"failed to get block");case 7:if(o=a.result){e.next=10;break}throw new Error("Block "+t+" not found");case 10:return e.abrupt("return",o);case 11:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getConfirmedBlockSignatures",value:function(){var e=(0,s.Z)(h().mark((function e(t,r){var n,i,a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._buildArgsAtLeastConfirmed([t],r,void 0,{transactionDetails:"signatures",rewards:!1}),e.next=3,this._rpcRequest("getConfirmedBlock",n);case 3:if(i=e.sent,!("error"in(a=(0,A.Ue)(i,pn)))){e.next=7;break}throw new wt(a.error,"failed to get confirmed block");case 7:if(o=a.result){e.next=10;break}throw new Error("Confirmed block "+t+" not found");case 10:return e.abrupt("return",o);case 11:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getConfirmedTransaction",value:function(){var e=(0,s.Z)(h().mark((function e(t,r){var n,i,a,o,s,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._buildArgsAtLeastConfirmed([t],r),e.next=3,this._rpcRequest("getConfirmedTransaction",n);case 3:if(i=e.sent,!("error"in(a=(0,A.Ue)(i,yn)))){e.next=7;break}throw new wt(a.error,"failed to get transaction");case 7:if(o=a.result){e.next=10;break}return e.abrupt("return",o);case 10:return s=new ve(o.transaction.message),u=o.transaction.signatures,e.abrupt("return",Kt(Kt({},o),{},{transaction:Te.populate(s,u)}));case 13:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getParsedConfirmedTransaction",value:function(){var e=(0,s.Z)(h().mark((function e(t,r){var n,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed"),e.next=3,this._rpcRequest("getConfirmedTransaction",n);case 3:if(i=e.sent,!("error"in(a=(0,A.Ue)(i,kn)))){e.next=7;break}throw new wt(a.error,"failed to get confirmed transaction");case 7:return e.abrupt("return",a.result);case 8:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getParsedConfirmedTransactions",value:function(){var e=(0,s.Z)(h().mark((function e(t,r){var n,i,a,o=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.map((function(e){return{methodName:"getConfirmedTransaction",args:o._buildArgsAtLeastConfirmed([e],r,"jsonParsed")}})),e.next=3,this._rpcBatchRequest(n);case 3:return i=e.sent,a=i.map((function(e){var t=(0,A.Ue)(e,kn);if("error"in t)throw new wt(t.error,"failed to get confirmed transactions");return t.result})),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getConfirmedSignaturesForAddress",value:function(){var e=(0,s.Z)(h().mark((function e(t,r,n){var i,a,o,s,u,c;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={},e.next=3,this.getFirstAvailableBlock();case 3:a=e.sent;case 4:if("until"in i){e.next=24;break}if(!(--r<=0||r<a)){e.next=8;break}return e.abrupt("break",24);case 8:return e.prev=8,e.next=11,this.getConfirmedBlockSignatures(r,"finalized");case 11:(o=e.sent).signatures.length>0&&(i.until=o.signatures[o.signatures.length-1].toString()),e.next=22;break;case 15:if(e.prev=15,e.t0=e.catch(8),!(e.t0 instanceof Error&&e.t0.message.includes("skipped"))){e.next=21;break}return e.abrupt("continue",4);case 21:throw e.t0;case 22:e.next=4;break;case 24:return e.next=26,this.getSlot("finalized");case 26:s=e.sent;case 27:if("before"in i){e.next=47;break}if(!(++n>s)){e.next=31;break}return e.abrupt("break",47);case 31:return e.prev=31,e.next=34,this.getConfirmedBlockSignatures(n);case 34:(u=e.sent).signatures.length>0&&(i.before=u.signatures[u.signatures.length-1].toString()),e.next=45;break;case 38:if(e.prev=38,e.t1=e.catch(31),!(e.t1 instanceof Error&&e.t1.message.includes("skipped"))){e.next=44;break}return e.abrupt("continue",27);case 44:throw e.t1;case 45:e.next=27;break;case 47:return e.next=49,this.getConfirmedSignaturesForAddress2(t,i);case 49:return c=e.sent,e.abrupt("return",c.map((function(e){return e.signature})));case 51:case"end":return e.stop()}}),e,this,[[8,15],[31,38]])})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"getConfirmedSignaturesForAddress2",value:function(){var e=(0,s.Z)(h().mark((function e(t,r,n){var i,a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this._buildArgsAtLeastConfirmed([t.toBase58()],n,void 0,r),e.next=3,this._rpcRequest("getConfirmedSignaturesForAddress2",i);case 3:if(a=e.sent,!("error"in(o=(0,A.Ue)(a,Ar)))){e.next=7;break}throw new wt(o.error,"failed to get confirmed signatures for address");case 7:return e.abrupt("return",o.result);case 8:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"getSignaturesForAddress",value:function(){var e=(0,s.Z)(h().mark((function e(t,r,n){var i,a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this._buildArgsAtLeastConfirmed([t.toBase58()],n,void 0,r),e.next=3,this._rpcRequest("getSignaturesForAddress",i);case 3:if(a=e.sent,!("error"in(o=(0,A.Ue)(a,Rr)))){e.next=7;break}throw new wt(o.error,"failed to get signatures for address");case 7:return e.abrupt("return",o.result);case 8:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"getAddressLookupTable",value:function(){var e=(0,s.Z)(h().mark((function e(t,r){var n,i,a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getAccountInfoAndContext(t,r);case 2:return n=e.sent,i=n.context,a=n.value,o=null,null!==a&&(o=new Rt({key:t,state:Rt.deserialize(a.data)})),e.abrupt("return",{context:i,value:o});case 8:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getNonceAndContext",value:function(){var e=(0,s.Z)(h().mark((function e(t,r){var n,i,a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getAccountInfoAndContext(t,r);case 2:return n=e.sent,i=n.context,a=n.value,o=null,null!==a&&(o=rt.fromAccountData(a.data)),e.abrupt("return",{context:i,value:o});case 8:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getNonce",value:function(){var e=(0,s.Z)(h().mark((function e(t,r){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getNonceAndContext(t,r).then((function(e){return e.value})).catch((function(e){throw new Error("failed to get nonce for account "+t.toBase58()+": "+e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"requestAirdrop",value:function(){var e=(0,s.Z)(h().mark((function e(t,r){var n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("requestAirdrop",[t.toBase58(),r]);case 2:if(n=e.sent,!("error"in(i=(0,A.Ue)(n,Sn)))){e.next=6;break}throw new wt(i.error,"airdrop to ".concat(t.toBase58()," failed"));case 6:return e.abrupt("return",i.result);case 7:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_blockhashWithExpiryBlockHeight",value:function(){var e=(0,s.Z)(h().mark((function e(t){var r,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=10;break}case 1:if(!this._pollingBlockhash){e.next=6;break}return e.next=4,Fe(100);case 4:e.next=1;break;case 6:if(r=Date.now()-this._blockhashInfo.lastFetch,n=r>=Nt,null===this._blockhashInfo.latestBlockhash||n){e.next=10;break}return e.abrupt("return",this._blockhashInfo.latestBlockhash);case 10:return e.next=12,this._pollNewBlockhash();case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_pollNewBlockhash",value:function(){var e=(0,s.Z)(h().mark((function e(){var t,r,n,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._pollingBlockhash=!0,e.prev=1,t=Date.now(),r=this._blockhashInfo.latestBlockhash,n=r?r.blockhash:null,i=0;case 6:if(!(i<50)){e.next=18;break}return e.next=9,this.getLatestBlockhash("finalized");case 9:if(a=e.sent,n===a.blockhash){e.next=13;break}return this._blockhashInfo={latestBlockhash:a,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},e.abrupt("return",a);case 13:return e.next=15,Fe(200);case 15:i++,e.next=6;break;case 18:throw new Error("Unable to obtain a new blockhash after ".concat(Date.now()-t,"ms"));case 19:return e.prev=19,this._pollingBlockhash=!1,e.finish(19);case 22:case"end":return e.stop()}}),e,this,[[1,,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"getStakeMinimumDelegation",value:function(){var e=(0,s.Z)(h().mark((function e(t){var r,n,i,a,o,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ut(t),n=r.commitment,i=r.config,a=this._buildArgs([],n,"base64",i),e.next=4,this._rpcRequest("getStakeMinimumDelegation",a);case 4:if(o=e.sent,!("error"in(s=(0,A.Ue)(o,Gt((0,A.Rx)()))))){e.next=8;break}throw new wt(s.error,"failed to get stake minimum delegation");case 8:return e.abrupt("return",s.result);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"simulateTransaction",value:function(){var e=(0,s.Z)(h().mark((function e(t,r,n){var i,o,s,u,c,l,d,f,p,y,k,b,g,m,v,w,x,I,_,R,P,E,B,T,Z,O;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!("message"in t)){e.next=17;break}if(i=t.serialize(),o=a.Buffer.from(i).toString("base64"),!Array.isArray(r)&&void 0===n){e.next=6;break}throw new Error("Invalid arguments");case 6:return(s=r||{}).encoding="base64","commitment"in s||(s.commitment=this.commitment),u=[o,s],e.next=12,this._rpcRequest("simulateTransaction",u);case 12:if(c=e.sent,!("error"in(l=(0,A.Ue)(c,ir)))){e.next=16;break}throw new Error("failed to simulate transaction: "+l.error.message);case 16:return e.abrupt("return",l.result);case 17:if(t instanceof Te?(f=t,(d=new Te).feePayer=f.feePayer,d.instructions=t.instructions,d.nonceInfo=f.nonceInfo,d.signatures=f.signatures):(d=Te.populate(t))._message=d._json=void 0,void 0===r||Array.isArray(r)){e.next=20;break}throw new Error("Invalid arguments");case 20:if(p=r,!d.nonceInfo||!p){e.next=25;break}(y=d).sign.apply(y,(0,S.Z)(p)),e.next=45;break;case 25:k=this._disableBlockhashCaching;case 26:return e.next=28,this._blockhashWithExpiryBlockHeight(k);case 28:if(g=e.sent,d.lastValidBlockHeight=g.lastValidBlockHeight,d.recentBlockhash=g.blockhash,p){e.next=33;break}return e.abrupt("break",45);case 33:if((b=d).sign.apply(b,(0,S.Z)(p)),d.signature){e.next=36;break}throw new Error("!signature");case 36:if(m=d.signature.toString("base64"),this._blockhashInfo.simulatedSignatures.includes(m)||this._blockhashInfo.transactionSignatures.includes(m)){e.next=42;break}return this._blockhashInfo.simulatedSignatures.push(m),e.abrupt("break",45);case 42:k=!0;case 43:e.next=26;break;case 45:return v=d._compile(),w=v.serialize(),x=d._serialize(w),I=x.toString("base64"),_={encoding:"base64",commitment:this.commitment},n&&(R=(Array.isArray(n)?n:v.nonProgramIds()).map((function(e){return e.toBase58()})),_.accounts={encoding:"base64",addresses:R}),p&&(_.sigVerify=!0),P=[I,_],e.next=55,this._rpcRequest("simulateTransaction",P);case 55:if(E=e.sent,!("error"in(B=(0,A.Ue)(E,ir)))){e.next=60;break}throw"data"in B.error&&(T=B.error.data.logs)&&Array.isArray(T)&&(O=(Z="\n    ")+T.join(Z),console.error(B.error.message,O)),new mt("failed to simulate transaction: "+B.error.message,T);case 60:return e.abrupt("return",B.result);case 61:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"sendTransaction",value:function(){var e=(0,s.Z)(h().mark((function e(t,r,n){var i,a,o,s,u,c;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!("version"in t)){e.next=7;break}if(!r||!Array.isArray(r)){e.next=3;break}throw new Error("Invalid arguments");case 3:return i=t.serialize(),e.next=6,this.sendRawTransaction(i,r);case 6:return e.abrupt("return",e.sent);case 7:if(void 0!==r&&Array.isArray(r)){e.next=9;break}throw new Error("Invalid arguments");case 9:if(a=r,!t.nonceInfo){e.next=14;break}t.sign.apply(t,(0,S.Z)(a)),e.next=32;break;case 14:o=this._disableBlockhashCaching;case 15:return e.next=17,this._blockhashWithExpiryBlockHeight(o);case 17:if(s=e.sent,t.lastValidBlockHeight=s.lastValidBlockHeight,t.recentBlockhash=s.blockhash,t.sign.apply(t,(0,S.Z)(a)),t.signature){e.next=23;break}throw new Error("!signature");case 23:if(u=t.signature.toString("base64"),this._blockhashInfo.transactionSignatures.includes(u)){e.next=29;break}return this._blockhashInfo.transactionSignatures.push(u),e.abrupt("break",32);case 29:o=!0;case 30:e.next=15;break;case 32:return c=t.serialize(),e.next=35,this.sendRawTransaction(c,n);case 35:return e.abrupt("return",e.sent);case 36:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"sendRawTransaction",value:function(){var e=(0,s.Z)(h().mark((function e(t,r){var n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=q(t).toString("base64"),e.next=3,this.sendEncodedTransaction(n,r);case 3:return i=e.sent,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"sendEncodedTransaction",value:function(){var e=(0,s.Z)(h().mark((function e(t,r){var n,i,a,o,s,u,c;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={encoding:"base64"},i=r&&r.skipPreflight,a=r&&r.preflightCommitment||this.commitment,r&&null!=r.maxRetries&&(n.maxRetries=r.maxRetries),r&&null!=r.minContextSlot&&(n.minContextSlot=r.minContextSlot),i&&(n.skipPreflight=i),a&&(n.preflightCommitment=a),o=[t,n],e.next=10,this._rpcRequest("sendTransaction",o);case 10:if(s=e.sent,!("error"in(u=(0,A.Ue)(s,In)))){e.next=15;break}throw"data"in u.error&&(c=u.error.data.logs),new mt("failed to send transaction: "+u.error.message,c);case 15:return e.abrupt("return",u.result);case 16:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_wsOnOpen",value:function(){var e=this;this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval((function(){(0,s.Z)(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e._rpcWebSocket.notify("ping");case 3:t.next=7;break;case 5:t.prev=5,t.t0=t.catch(0);case 7:case"end":return t.stop()}}),t,null,[[0,5]])})))()}),5e3),this._updateSubscriptions()}},{key:"_wsOnError",value:function(e){this._rpcWebSocketConnected=!1,console.error("ws error:",e.message)}},{key:"_wsOnClose",value:function(e){var t=this;this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),1e3!==e?(this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach((function(e){var r=(0,v.Z)(e,2),n=r[0],i=r[1];t._setSubscription(n,Kt(Kt({},i),{},{state:"pending"}))}))):this._updateSubscriptions()}},{key:"_setSubscription",value:function(e,t){var r,n=null===(r=this._subscriptionsByHash[e])||void 0===r?void 0:r.state;if(this._subscriptionsByHash[e]=t,n!==t.state){var i=this._subscriptionStateChangeCallbacksByHash[e];i&&i.forEach((function(e){try{e(t.state)}catch(r){}}))}}},{key:"_onSubscriptionStateChange",value:function(e,t){var r,n=this,i=this._subscriptionHashByClientSubscriptionId[e];if(null==i)return function(){};var a=(r=this._subscriptionStateChangeCallbacksByHash)[i]||(r[i]=new Set);return a.add(t),function(){a.delete(t),0===a.size&&delete n._subscriptionStateChangeCallbacksByHash[i]}}},{key:"_updateSubscriptions",value:function(){var e=(0,s.Z)(h().mark((function e(){var t,r,n=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==Object.keys(this._subscriptionsByHash).length){e.next=3;break}return this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout((function(){n._rpcWebSocketIdleTimeout=null;try{n._rpcWebSocket.close()}catch(e){e instanceof Error&&console.log("Error when closing socket connection: ".concat(e.message))}}),500)),e.abrupt("return");case 3:if(null!==this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),this._rpcWebSocketConnected){e.next=7;break}return this._rpcWebSocket.connect(),e.abrupt("return");case 7:return t=this._rpcWebSocketGeneration,r=function(){return t===n._rpcWebSocketGeneration},e.next=11,Promise.all(Object.keys(this._subscriptionsByHash).map(function(){var e=(0,s.Z)(h().mark((function e(t){var i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==(i=n._subscriptionsByHash[t])){e.next=3;break}return e.abrupt("return");case 3:e.t0=i.state,e.next="pending"===e.t0||"unsubscribed"===e.t0?6:"subscribed"===e.t0?15:"subscribing"===e.t0||"unsubscribing"===e.t0?19:20;break;case 6:if(0!==i.callbacks.size){e.next=12;break}return delete n._subscriptionsByHash[t],"unsubscribed"===i.state&&delete n._subscriptionCallbacksByServerSubscriptionId[i.serverSubscriptionId],e.next=11,n._updateSubscriptions();case 11:return e.abrupt("return");case 12:return e.next=14,(0,s.Z)(h().mark((function e(){var a,o,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.args,o=i.method,e.prev=1,n._setSubscription(t,Kt(Kt({},i),{},{state:"subscribing"})),e.next=5,n._rpcWebSocket.call(o,a);case 5:return s=e.sent,n._setSubscription(t,Kt(Kt({},i),{},{serverSubscriptionId:s,state:"subscribed"})),n._subscriptionCallbacksByServerSubscriptionId[s]=i.callbacks,e.next=10,n._updateSubscriptions();case 10:e.next=20;break;case 12:if(e.prev=12,e.t0=e.catch(1),e.t0 instanceof Error&&console.error("".concat(o," error for argument"),a,e.t0.message),r()){e.next=17;break}return e.abrupt("return");case 17:return n._setSubscription(t,Kt(Kt({},i),{},{state:"pending"})),e.next=20,n._updateSubscriptions();case 20:case"end":return e.stop()}}),e,null,[[1,12]])})))();case 14:return e.abrupt("break",20);case 15:if(0!==i.callbacks.size){e.next=18;break}return e.next=18,(0,s.Z)(h().mark((function e(){var a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=i.serverSubscriptionId,o=i.unsubscribeMethod,!n._subscriptionsAutoDisposedByRpc.has(a)){e.next=5;break}n._subscriptionsAutoDisposedByRpc.delete(a),e.next=21;break;case 5:return n._setSubscription(t,Kt(Kt({},i),{},{state:"unsubscribing"})),n._setSubscription(t,Kt(Kt({},i),{},{state:"unsubscribing"})),e.prev=7,e.next=10,n._rpcWebSocket.call(o,[a]);case 10:e.next=21;break;case 12:if(e.prev=12,e.t0=e.catch(7),e.t0 instanceof Error&&console.error("".concat(o," error:"),e.t0.message),r()){e.next=17;break}return e.abrupt("return");case 17:return n._setSubscription(t,Kt(Kt({},i),{},{state:"subscribed"})),e.next=20,n._updateSubscriptions();case 20:return e.abrupt("return");case 21:return n._setSubscription(t,Kt(Kt({},i),{},{state:"unsubscribed"})),e.next=24,n._updateSubscriptions();case 24:case"end":return e.stop()}}),e,null,[[7,12]])})))();case 18:case 19:return e.abrupt("break",20);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_handleServerNotification",value:function(e,t){var r=this._subscriptionCallbacksByServerSubscriptionId[e];void 0!==r&&r.forEach((function(e){try{e.apply(void 0,(0,S.Z)(t))}catch(r){console.error(r)}}))}},{key:"_wsOnAccountNotification",value:function(e){var t=(0,A.Ue)(e,Pr),r=t.result,n=t.subscription;this._handleServerNotification(n,[r.value,r.context])}},{key:"_makeSubscription",value:function(e,t){var r=this,n=this._nextClientSubscriptionId++,i=yt([e.method,t],!0),a=this._subscriptionsByHash[i];return void 0===a?this._subscriptionsByHash[i]=Kt(Kt({},e),{},{args:t,callbacks:new Set([e.callback]),state:"pending"}):a.callbacks.add(e.callback),this._subscriptionHashByClientSubscriptionId[n]=i,this._subscriptionDisposeFunctionsByClientSubscriptionId[n]=(0,s.Z)(h().mark((function t(){var a;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return delete r._subscriptionDisposeFunctionsByClientSubscriptionId[n],delete r._subscriptionHashByClientSubscriptionId[n],ke(void 0!==(a=r._subscriptionsByHash[i]),"Could not find a `Subscription` when tearing down client subscription #".concat(n)),a.callbacks.delete(e.callback),t.next=7,r._updateSubscriptions();case 7:case"end":return t.stop()}}),t)}))),this._updateSubscriptions(),n}},{key:"onAccountChange",value:function(e,t,r){var n=this._buildArgs([e.toBase58()],r||this._commitment||"finalized","base64");return this._makeSubscription({callback:t,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},n)}},{key:"removeAccountChangeListener",value:function(){var e=(0,s.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._unsubscribeClientSubscription(t,"account change");case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_wsOnProgramAccountNotification",value:function(e){var t=(0,A.Ue)(e,Br),r=t.result,n=t.subscription;this._handleServerNotification(n,[{accountId:r.value.pubkey,accountInfo:r.value.account},r.context])}},{key:"onProgramAccountChange",value:function(e,t,r,n){var i=this._buildArgs([e.toBase58()],r||this._commitment||"finalized","base64",n?{filters:n}:void 0);return this._makeSubscription({callback:t,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},i)}},{key:"removeProgramAccountChangeListener",value:function(){var e=(0,s.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._unsubscribeClientSubscription(t,"program account change");case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onLogs",value:function(e,t,r){var n=this._buildArgs(["object"===(0,I.Z)(e)?{mentions:[e.toString()]}:e],r||this._commitment||"finalized");return this._makeSubscription({callback:t,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},n)}},{key:"removeOnLogsListener",value:function(){var e=(0,s.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._unsubscribeClientSubscription(t,"logs");case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_wsOnLogsNotification",value:function(e){var t=(0,A.Ue)(e,An),r=t.result,n=t.subscription;this._handleServerNotification(n,[r.value,r.context])}},{key:"_wsOnSlotNotification",value:function(e){var t=(0,A.Ue)(e,Zr),r=t.result,n=t.subscription;this._handleServerNotification(n,[r])}},{key:"onSlotChange",value:function(e){return this._makeSubscription({callback:e,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}},{key:"removeSlotChangeListener",value:function(){var e=(0,s.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._unsubscribeClientSubscription(t,"slot change");case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_wsOnSlotUpdatesNotification",value:function(e){var t=(0,A.Ue)(e,Cr),r=t.result,n=t.subscription;this._handleServerNotification(n,[r])}},{key:"onSlotUpdate",value:function(e){return this._makeSubscription({callback:e,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}},{key:"removeSlotUpdateListener",value:function(){var e=(0,s.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._unsubscribeClientSubscription(t,"slot update");case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_unsubscribeClientSubscription",value:function(){var e=(0,s.Z)(h().mark((function e(t,r){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=this._subscriptionDisposeFunctionsByClientSubscriptionId[t])){e.next=6;break}return e.next=4,n();case 4:e.next=7;break;case 6:console.warn("Ignored unsubscribe request because an active subscription with id "+"`".concat(t,"` for '").concat(r,"' events ")+"could not be found.");case 7:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_buildArgs",value:function(e,t,r,n){var i=t||this._commitment;if(i||r||n){var a={};r&&(a.encoding=r),i&&(a.commitment=i),n&&(a=Object.assign(a,n)),e.push(a)}return e}},{key:"_buildArgsAtLeastConfirmed",value:function(e,t,r,n){var i=t||this._commitment;if(i&&!["confirmed","finalized"].includes(i))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(e,t,r,n)}},{key:"_wsOnSignatureNotification",value:function(e){var t=(0,A.Ue)(e,Kr),r=t.result,n=t.subscription;"receivedSignature"!==r.value&&this._subscriptionsAutoDisposedByRpc.add(n),this._handleServerNotification(n,"receivedSignature"===r.value?[{type:"received"},r.context]:[{type:"status",result:r.value},r.context])}},{key:"onSignature",value:function(e,t,r){var n=this,i=this._buildArgs([e],r||this._commitment||"finalized"),a=this._makeSubscription({callback:function(e,r){if("status"===e.type){t(e.result,r);try{n.removeSignatureListener(a)}catch(i){}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},i);return a}},{key:"onSignatureWithOptions",value:function(e,t,r){var n=this,i=Kt(Kt({},r),{},{commitment:r&&r.commitment||this._commitment||"finalized"}),a=i.commitment,o=(0,_.Z)(i,Ot),s=this._buildArgs([e],a,void 0,o),u=this._makeSubscription({callback:function(e,r){t(e,r);try{n.removeSignatureListener(u)}catch(i){}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},s);return u}},{key:"removeSignatureListener",value:function(){var e=(0,s.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._unsubscribeClientSubscription(t,"signature result");case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_wsOnRootNotification",value:function(e){var t=(0,A.Ue)(e,Lr),r=t.result,n=t.subscription;this._handleServerNotification(n,[r])}},{key:"onRootChange",value:function(e){return this._makeSubscription({callback:e,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}},{key:"removeRootChangeListener",value:function(){var e=(0,s.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._unsubscribeClientSubscription(t,"root change");case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),En=function(){function e(t){(0,n.Z)(this,e),this._keypair=void 0,this._keypair=null!==t&&void 0!==t?t:L()}return(0,i.Z)(e,[{key:"publicKey",get:function(){return new Y(this._keypair.publicKey)}},{key:"secretKey",get:function(){return new Uint8Array(this._keypair.secretKey)}}],[{key:"generate",value:function(){return new e(L())}},{key:"fromSecretKey",value:function(t,r){if(64!==t.byteLength)throw new Error("bad secret key size");var n=t.slice(32,64);if(!r||!r.skipValidation)for(var i=t.slice(0,32),a=z(i),o=0;o<32;o++)if(n[o]!==a[o])throw new Error("provided secretKey is invalid");return new e({publicKey:n,secretKey:t})}},{key:"fromSeed",value:function(t){var r=z(t),n=new Uint8Array(64);return n.set(t),n.set(r,32),new e({publicKey:r,secretKey:n})}}]),e}(),Bn=Object.freeze({CreateLookupTable:{index:0,layout:m.n_([m.Jq("instruction"),nt("recentSlot"),m.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:m.n_([m.Jq("instruction")])},ExtendLookupTable:{index:2,layout:m.n_([m.Jq("instruction"),nt(),m.A9(le(),m.cv(m.Jq(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:m.n_([m.Jq("instruction")])},CloseLookupTable:{index:4,layout:m.n_([m.Jq("instruction")])}}),Tn=function(){function e(){(0,n.Z)(this,e)}return(0,i.Z)(e,null,[{key:"decodeInstructionType",value:function(e){this.checkProgramId(e.programId);for(var t,r=m.Jq("instruction").decode(e.data),n=0,i=Object.entries(Bn);n<i.length;n++){var a=(0,v.Z)(i[n],2),o=a[0];if(a[1].index==r){t=o;break}}if(!t)throw new Error("Invalid Instruction. Should be a LookupTable Instruction");return t}},{key:"decodeCreateLookupTable",value:function(e){this.checkProgramId(e.programId),this.checkKeysLength(e.keys,4);var t=Ye(Bn.CreateLookupTable,e.data).recentSlot;return{authority:e.keys[1].pubkey,payer:e.keys[2].pubkey,recentSlot:Number(t)}}},{key:"decodeExtendLookupTable",value:function(e){if(this.checkProgramId(e.programId),e.keys.length<2)throw new Error("invalid instruction; found ".concat(e.keys.length," keys, expected at least 2"));var t=Ye(Bn.ExtendLookupTable,e.data).addresses;return{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey,payer:e.keys.length>2?e.keys[2].pubkey:void 0,addresses:t.map((function(e){return new Y(e)}))}}},{key:"decodeCloseLookupTable",value:function(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,3),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey,recipient:e.keys[2].pubkey}}},{key:"decodeFreezeLookupTable",value:function(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,2),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey}}},{key:"decodeDeactivateLookupTable",value:function(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,2),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey}}},{key:"checkProgramId",value:function(e){if(!e.equals(Zn.programId))throw new Error("invalid instruction; programId is not AddressLookupTable Program")}},{key:"checkKeysLength",value:function(e,t){if(e.length<t)throw new Error("invalid instruction; found ".concat(e.length," keys, expected at least ").concat(t))}}]),e}(),Zn=function(){function e(){(0,n.Z)(this,e)}return(0,i.Z)(e,null,[{key:"createLookupTable",value:function(e){var t=Y.findProgramAddressSync([e.authority.toBuffer(),(0,w.k$)(BigInt(e.recentSlot),8)],this.programId),r=(0,v.Z)(t,2),n=r[0],i=r[1],a=Xe(Bn.CreateLookupTable,{recentSlot:BigInt(e.recentSlot),bumpSeed:i}),o=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:ot.programId,isSigner:!1,isWritable:!1}];return[new Be({programId:this.programId,keys:o,data:a}),n]}},{key:"freezeLookupTable",value:function(e){var t=Xe(Bn.FreezeLookupTable),r=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new Be({programId:this.programId,keys:r,data:t})}},{key:"extendLookupTable",value:function(e){var t=Xe(Bn.ExtendLookupTable,{addresses:e.addresses.map((function(e){return e.toBytes()}))}),r=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return e.payer&&r.push({pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:ot.programId,isSigner:!1,isWritable:!1}),new Be({programId:this.programId,keys:r,data:t})}},{key:"deactivateLookupTable",value:function(e){var t=Xe(Bn.DeactivateLookupTable),r=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new Be({programId:this.programId,keys:r,data:t})}},{key:"closeLookupTable",value:function(e){var t=Xe(Bn.CloseLookupTable),r=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.recipient,isSigner:!1,isWritable:!0}];return new Be({programId:this.programId,keys:r,data:t})}}]),e}();Zn.programId=new Y("AddressLookupTab1e1111111111111111111111111");var On=function(){function e(){(0,n.Z)(this,e)}return(0,i.Z)(e,null,[{key:"decodeInstructionType",value:function(e){this.checkProgramId(e.programId);for(var t,r=m.u8("instruction").decode(e.data),n=0,i=Object.entries(Cn);n<i.length;n++){var a=(0,v.Z)(i[n],2),o=a[0];if(a[1].index==r){t=o;break}}if(!t)throw new Error("Instruction type incorrect; not a ComputeBudgetInstruction");return t}},{key:"decodeRequestUnits",value:function(e){this.checkProgramId(e.programId);var t=Ye(Cn.RequestUnits,e.data);return{units:t.units,additionalFee:t.additionalFee}}},{key:"decodeRequestHeapFrame",value:function(e){return this.checkProgramId(e.programId),{bytes:Ye(Cn.RequestHeapFrame,e.data).bytes}}},{key:"decodeSetComputeUnitLimit",value:function(e){return this.checkProgramId(e.programId),{units:Ye(Cn.SetComputeUnitLimit,e.data).units}}},{key:"decodeSetComputeUnitPrice",value:function(e){return this.checkProgramId(e.programId),{microLamports:Ye(Cn.SetComputeUnitPrice,e.data).microLamports}}},{key:"checkProgramId",value:function(e){if(!e.equals(Kn.programId))throw new Error("invalid instruction; programId is not ComputeBudgetProgram")}}]),e}(),Cn=Object.freeze({RequestUnits:{index:0,layout:m.n_([m.u8("instruction"),m.Jq("units"),m.Jq("additionalFee")])},RequestHeapFrame:{index:1,layout:m.n_([m.u8("instruction"),m.Jq("bytes")])},SetComputeUnitLimit:{index:2,layout:m.n_([m.u8("instruction"),m.Jq("units")])},SetComputeUnitPrice:{index:3,layout:m.n_([m.u8("instruction"),nt("microLamports")])}}),Kn=function(){function e(){(0,n.Z)(this,e)}return(0,i.Z)(e,null,[{key:"requestUnits",value:function(e){var t=Xe(Cn.RequestUnits,e);return new Be({keys:[],programId:this.programId,data:t})}},{key:"requestHeapFrame",value:function(e){var t=Xe(Cn.RequestHeapFrame,e);return new Be({keys:[],programId:this.programId,data:t})}},{key:"setComputeUnitLimit",value:function(e){var t=Xe(Cn.SetComputeUnitLimit,e);return new Be({keys:[],programId:this.programId,data:t})}},{key:"setComputeUnitPrice",value:function(e){var t=Xe(Cn.SetComputeUnitPrice,{microLamports:BigInt(e.microLamports)});return new Be({keys:[],programId:this.programId,data:t})}}]),e}();Kn.programId=new Y("ComputeBudget111111111111111111111111111111");var Ln=m.n_([m.u8("numSignatures"),m.u8("padding"),m.KB("signatureOffset"),m.KB("signatureInstructionIndex"),m.KB("publicKeyOffset"),m.KB("publicKeyInstructionIndex"),m.KB("messageDataOffset"),m.KB("messageDataSize"),m.KB("messageInstructionIndex")]),zn=function(){function e(){(0,n.Z)(this,e)}return(0,i.Z)(e,null,[{key:"createInstructionWithPublicKey",value:function(t){var r=t.publicKey,n=t.message,i=t.signature,o=t.instructionIndex;ke(32===r.length,"Public Key must be ".concat(32," bytes but received ").concat(r.length," bytes")),ke(64===i.length,"Signature must be ".concat(64," bytes but received ").concat(i.length," bytes"));var s=Ln.span,u=s+r.length,c=u+i.length,l=a.Buffer.alloc(c+n.length),d=null==o?65535:o;return Ln.encode({numSignatures:1,padding:0,signatureOffset:u,signatureInstructionIndex:d,publicKeyOffset:s,publicKeyInstructionIndex:d,messageDataOffset:c,messageDataSize:n.length,messageInstructionIndex:d},l),l.fill(r,s),l.fill(i,u),l.fill(n,c),new Be({keys:[],programId:e.programId,data:l})}},{key:"createInstructionWithPrivateKey",value:function(e){var t=e.privateKey,r=e.message,n=e.instructionIndex;ke(64===t.length,"Private key must be ".concat(64," bytes but received ").concat(t.length," bytes"));try{var i=En.fromSecretKey(t),a=i.publicKey.toBytes(),o=N(r,i.secretKey);return this.createInstructionWithPublicKey({publicKey:a,message:r,signature:o,instructionIndex:n})}catch(s){throw new Error("Error creating instruction; ".concat(s))}}}]),e}();zn.programId=new Y("Ed25519SigVerify111111111111111111111111111");C.kA.utils.isValidPrivateKey;var Wn=C.kA.getPublicKey,Nn=m.n_([m.u8("numSignatures"),m.KB("signatureOffset"),m.u8("signatureInstructionIndex"),m.KB("ethAddressOffset"),m.u8("ethAddressInstructionIndex"),m.KB("messageDataOffset"),m.KB("messageDataSize"),m.u8("messageInstructionIndex"),m.Ik(20,"ethAddress"),m.Ik(64,"signature"),m.u8("recoveryId")]),Un=function(){function e(){(0,n.Z)(this,e)}return(0,i.Z)(e,null,[{key:"publicKeyToEthAddress",value:function(e){ke(64===e.length,"Public key must be ".concat(64," bytes but received ").concat(e.length," bytes"));try{return a.Buffer.from((0,O.fr)(q(e))).slice(-20)}catch(t){throw new Error("Error constructing Ethereum address: ".concat(t))}}},{key:"createInstructionWithPublicKey",value:function(t){var r=t.publicKey,n=t.message,i=t.signature,a=t.recoveryId,o=t.instructionIndex;return e.createInstructionWithEthAddress({ethAddress:e.publicKeyToEthAddress(r),message:n,signature:i,recoveryId:a,instructionIndex:o})}},{key:"createInstructionWithEthAddress",value:function(t){var r,n=t.ethAddress,i=t.message,o=t.signature,s=t.recoveryId,u=t.instructionIndex,c=void 0===u?0:u;ke(20===(r="string"===typeof n?n.startsWith("0x")?a.Buffer.from(n.substr(2),"hex"):a.Buffer.from(n,"hex"):n).length,"Address must be ".concat(20," bytes but received ").concat(r.length," bytes"));var l=12+r.length,d=l+o.length+1,h=a.Buffer.alloc(Nn.span+i.length);return Nn.encode({numSignatures:1,signatureOffset:l,signatureInstructionIndex:c,ethAddressOffset:12,ethAddressInstructionIndex:c,messageDataOffset:d,messageDataSize:i.length,messageInstructionIndex:c,signature:q(o),ethAddress:q(r),recoveryId:s},h),h.fill(q(i),Nn.span),new Be({keys:[],programId:e.programId,data:h})}},{key:"createInstructionWithPrivateKey",value:function(e){var t=e.privateKey,r=e.message,n=e.instructionIndex;ke(32===t.length,"Private key must be ".concat(32," bytes but received ").concat(t.length," bytes"));try{var i=q(t),o=Wn(i,!1).slice(1),s=function(e,t){var r=C.kA.sign(e,t);return[r.toCompactRawBytes(),r.recovery]}(a.Buffer.from((0,O.fr)(q(r))),i),u=(0,v.Z)(s,2),c=u[0],l=u[1];return this.createInstructionWithPublicKey({publicKey:o,message:r,signature:c,recoveryId:l,instructionIndex:n})}catch(d){throw new Error("Error creating instruction; ".concat(d))}}}]),e}();Un.programId=new Y("KeccakSecp256k11111111111111111111111111111");var qn=new Y("StakeConfig11111111111111111111111111111111"),jn=(0,i.Z)((function e(t,r){(0,n.Z)(this,e),this.staker=void 0,this.withdrawer=void 0,this.staker=t,this.withdrawer=r})),Mn=(0,i.Z)((function e(t,r,i){(0,n.Z)(this,e),this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=t,this.epoch=r,this.custodian=i}));Mn.default=new Mn(0,0,Y.default);var Gn=function(){function e(){(0,n.Z)(this,e)}return(0,i.Z)(e,null,[{key:"decodeInstructionType",value:function(e){this.checkProgramId(e.programId);for(var t,r=m.Jq("instruction").decode(e.data),n=0,i=Object.entries(Dn);n<i.length;n++){var a=(0,v.Z)(i[n],2),o=a[0];if(a[1].index==r){t=o;break}}if(!t)throw new Error("Instruction type incorrect; not a StakeInstruction");return t}},{key:"decodeInitialize",value:function(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);var t=Ye(Dn.Initialize,e.data),r=t.authorized,n=t.lockup;return{stakePubkey:e.keys[0].pubkey,authorized:new jn(new Y(r.staker),new Y(r.withdrawer)),lockup:new Mn(n.unixTimestamp,n.epoch,new Y(n.custodian))}}},{key:"decodeDelegate",value:function(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,6),Ye(Dn.Delegate,e.data),{stakePubkey:e.keys[0].pubkey,votePubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[5].pubkey}}},{key:"decodeAuthorize",value:function(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);var t=Ye(Dn.Authorize,e.data),r=t.newAuthorized,n=t.stakeAuthorizationType,i={stakePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey,newAuthorizedPubkey:new Y(r),stakeAuthorizationType:{index:n}};return e.keys.length>3&&(i.custodianPubkey=e.keys[3].pubkey),i}},{key:"decodeAuthorizeWithSeed",value:function(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);var t=Ye(Dn.AuthorizeWithSeed,e.data),r=t.newAuthorized,n=t.stakeAuthorizationType,i=t.authoritySeed,a=t.authorityOwner,o={stakePubkey:e.keys[0].pubkey,authorityBase:e.keys[1].pubkey,authoritySeed:i,authorityOwner:new Y(a),newAuthorizedPubkey:new Y(r),stakeAuthorizationType:{index:n}};return e.keys.length>3&&(o.custodianPubkey=e.keys[3].pubkey),o}},{key:"decodeSplit",value:function(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);var t=Ye(Dn.Split,e.data).lamports;return{stakePubkey:e.keys[0].pubkey,splitStakePubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[2].pubkey,lamports:t}}},{key:"decodeMerge",value:function(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),Ye(Dn.Merge,e.data),{stakePubkey:e.keys[0].pubkey,sourceStakePubKey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey}}},{key:"decodeWithdraw",value:function(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,5);var t=Ye(Dn.Withdraw,e.data).lamports,r={stakePubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey,lamports:t};return e.keys.length>5&&(r.custodianPubkey=e.keys[5].pubkey),r}},{key:"decodeDeactivate",value:function(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),Ye(Dn.Deactivate,e.data),{stakePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey}}},{key:"checkProgramId",value:function(e){if(!e.equals(Jn.programId))throw new Error("invalid instruction; programId is not StakeProgram")}},{key:"checkKeyLength",value:function(e,t){if(e.length<t)throw new Error("invalid instruction; found ".concat(e.length," keys, expected at least ").concat(t))}}]),e}(),Dn=Object.freeze({Initialize:{index:0,layout:m.n_([m.Jq("instruction"),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"authorized";return m.n_([le("staker"),le("withdrawer")],e)}(),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"lockup";return m.n_([m.gM("unixTimestamp"),m.gM("epoch"),le("custodian")],e)}()])},Authorize:{index:1,layout:m.n_([m.Jq("instruction"),le("newAuthorized"),m.Jq("stakeAuthorizationType")])},Delegate:{index:2,layout:m.n_([m.Jq("instruction")])},Split:{index:3,layout:m.n_([m.Jq("instruction"),m.gM("lamports")])},Withdraw:{index:4,layout:m.n_([m.Jq("instruction"),m.gM("lamports")])},Deactivate:{index:5,layout:m.n_([m.Jq("instruction")])},Merge:{index:7,layout:m.n_([m.Jq("instruction")])},AuthorizeWithSeed:{index:8,layout:m.n_([m.Jq("instruction"),le("newAuthorized"),m.Jq("stakeAuthorizationType"),he("authoritySeed"),le("authorityOwner")])}}),Vn=Object.freeze({Staker:{index:0},Withdrawer:{index:1}}),Jn=function(){function e(){(0,n.Z)(this,e)}return(0,i.Z)(e,null,[{key:"initialize",value:function(e){var t=e.stakePubkey,r=e.authorized,n=e.lockup||Mn.default,i=Xe(Dn.Initialize,{authorized:{staker:q(r.staker.toBuffer()),withdrawer:q(r.withdrawer.toBuffer())},lockup:{unixTimestamp:n.unixTimestamp,epoch:n.epoch,custodian:q(n.custodian.toBuffer())}}),a={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:je,isSigner:!1,isWritable:!1}],programId:this.programId,data:i};return new Be(a)}},{key:"createAccountWithSeed",value:function(e){var t=new Te;t.add(ot.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:this.space,programId:this.programId}));var r=e.stakePubkey,n=e.authorized,i=e.lockup;return t.add(this.initialize({stakePubkey:r,authorized:n,lockup:i}))}},{key:"createAccount",value:function(e){var t=new Te;t.add(ot.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,lamports:e.lamports,space:this.space,programId:this.programId}));var r=e.stakePubkey,n=e.authorized,i=e.lockup;return t.add(this.initialize({stakePubkey:r,authorized:n,lockup:i}))}},{key:"delegate",value:function(e){var t=e.stakePubkey,r=e.authorizedPubkey,n=e.votePubkey,i=Xe(Dn.Delegate);return(new Te).add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:We,isSigner:!1,isWritable:!1},{pubkey:Ve,isSigner:!1,isWritable:!1},{pubkey:qn,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}},{key:"authorize",value:function(e){var t=e.stakePubkey,r=e.authorizedPubkey,n=e.newAuthorizedPubkey,i=e.stakeAuthorizationType,a=e.custodianPubkey,o=Xe(Dn.Authorize,{newAuthorized:q(n.toBuffer()),stakeAuthorizationType:i.index}),s=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:We,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return a&&s.push({pubkey:a,isSigner:!1,isWritable:!1}),(new Te).add({keys:s,programId:this.programId,data:o})}},{key:"authorizeWithSeed",value:function(e){var t=e.stakePubkey,r=e.authorityBase,n=e.authoritySeed,i=e.authorityOwner,a=e.newAuthorizedPubkey,o=e.stakeAuthorizationType,s=e.custodianPubkey,u=Xe(Dn.AuthorizeWithSeed,{newAuthorized:q(a.toBuffer()),stakeAuthorizationType:o.index,authoritySeed:n,authorityOwner:q(i.toBuffer())}),c=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1},{pubkey:We,isSigner:!1,isWritable:!1}];return s&&c.push({pubkey:s,isSigner:!1,isWritable:!1}),(new Te).add({keys:c,programId:this.programId,data:u})}},{key:"splitInstruction",value:function(e){var t=e.stakePubkey,r=e.authorizedPubkey,n=e.splitStakePubkey,i=e.lamports,a=Xe(Dn.Split,{lamports:i});return new Be({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:a})}},{key:"split",value:function(e){var t=new Te;return t.add(ot.createAccount({fromPubkey:e.authorizedPubkey,newAccountPubkey:e.splitStakePubkey,lamports:0,space:this.space,programId:this.programId})),t.add(this.splitInstruction(e))}},{key:"splitWithSeed",value:function(e){var t=e.stakePubkey,r=e.authorizedPubkey,n=e.splitStakePubkey,i=e.basePubkey,a=e.seed,o=e.lamports,s=new Te;return s.add(ot.allocate({accountPubkey:n,basePubkey:i,seed:a,space:this.space,programId:this.programId})),s.add(this.splitInstruction({stakePubkey:t,authorizedPubkey:r,splitStakePubkey:n,lamports:o}))}},{key:"merge",value:function(e){var t=e.stakePubkey,r=e.sourceStakePubKey,n=e.authorizedPubkey,i=Xe(Dn.Merge);return(new Te).add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:We,isSigner:!1,isWritable:!1},{pubkey:Ve,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}},{key:"withdraw",value:function(e){var t=e.stakePubkey,r=e.authorizedPubkey,n=e.toPubkey,i=e.lamports,a=e.custodianPubkey,o=Xe(Dn.Withdraw,{lamports:i}),s=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:We,isSigner:!1,isWritable:!1},{pubkey:Ve,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return a&&s.push({pubkey:a,isSigner:!1,isWritable:!1}),(new Te).add({keys:s,programId:this.programId,data:o})}},{key:"deactivate",value:function(e){var t=e.stakePubkey,r=e.authorizedPubkey,n=Xe(Dn.Deactivate);return(new Te).add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:We,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}}]),e}();Jn.programId=new Y("Stake11111111111111111111111111111111111111"),Jn.space=200;var Hn=(0,i.Z)((function e(t,r,i,a){(0,n.Z)(this,e),this.nodePubkey=void 0,this.authorizedVoter=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.nodePubkey=t,this.authorizedVoter=r,this.authorizedWithdrawer=i,this.commission=a})),Fn=function(){function e(){(0,n.Z)(this,e)}return(0,i.Z)(e,null,[{key:"decodeInstructionType",value:function(e){this.checkProgramId(e.programId);for(var t,r=m.Jq("instruction").decode(e.data),n=0,i=Object.entries(Xn);n<i.length;n++){var a=(0,v.Z)(i[n],2),o=a[0];if(a[1].index==r){t=o;break}}if(!t)throw new Error("Instruction type incorrect; not a VoteInstruction");return t}},{key:"decodeInitializeAccount",value:function(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,4);var t=Ye(Xn.InitializeAccount,e.data).voteInit;return{votePubkey:e.keys[0].pubkey,nodePubkey:e.keys[3].pubkey,voteInit:new Hn(new Y(t.nodePubkey),new Y(t.authorizedVoter),new Y(t.authorizedWithdrawer),t.commission)}}},{key:"decodeAuthorize",value:function(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);var t=Ye(Xn.Authorize,e.data),r=t.newAuthorized,n=t.voteAuthorizationType;return{votePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey,newAuthorizedPubkey:new Y(r),voteAuthorizationType:{index:n}}}},{key:"decodeAuthorizeWithSeed",value:function(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);var t=Ye(Xn.AuthorizeWithSeed,e.data).voteAuthorizeWithSeedArgs,r=t.currentAuthorityDerivedKeyOwnerPubkey,n=t.currentAuthorityDerivedKeySeed,i=t.newAuthorized,a=t.voteAuthorizationType;return{currentAuthorityDerivedKeyBasePubkey:e.keys[2].pubkey,currentAuthorityDerivedKeyOwnerPubkey:new Y(r),currentAuthorityDerivedKeySeed:n,newAuthorizedPubkey:new Y(i),voteAuthorizationType:{index:a},votePubkey:e.keys[0].pubkey}}},{key:"decodeWithdraw",value:function(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);var t=Ye(Xn.Withdraw,e.data).lamports;return{votePubkey:e.keys[0].pubkey,authorizedWithdrawerPubkey:e.keys[2].pubkey,lamports:t,toPubkey:e.keys[1].pubkey}}},{key:"checkProgramId",value:function(e){if(!e.equals($n.programId))throw new Error("invalid instruction; programId is not VoteProgram")}},{key:"checkKeyLength",value:function(e,t){if(e.length<t)throw new Error("invalid instruction; found ".concat(e.length," keys, expected at least ").concat(t))}}]),e}(),Xn=Object.freeze({InitializeAccount:{index:0,layout:m.n_([m.Jq("instruction"),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"voteInit";return m.n_([le("nodePubkey"),le("authorizedVoter"),le("authorizedWithdrawer"),m.u8("commission")],e)}()])},Authorize:{index:1,layout:m.n_([m.Jq("instruction"),le("newAuthorized"),m.Jq("voteAuthorizationType")])},Withdraw:{index:3,layout:m.n_([m.Jq("instruction"),m.gM("lamports")])},AuthorizeWithSeed:{index:10,layout:m.n_([m.Jq("instruction"),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"voteAuthorizeWithSeedArgs";return m.n_([m.Jq("voteAuthorizationType"),le("currentAuthorityDerivedKeyOwnerPubkey"),he("currentAuthorityDerivedKeySeed"),le("newAuthorized")],e)}()])}}),Yn=Object.freeze({Voter:{index:0},Withdrawer:{index:1}}),$n=function(){function e(){(0,n.Z)(this,e)}return(0,i.Z)(e,null,[{key:"initializeAccount",value:function(e){var t=e.votePubkey,r=e.nodePubkey,n=e.voteInit,i=Xe(Xn.InitializeAccount,{voteInit:{nodePubkey:q(n.nodePubkey.toBuffer()),authorizedVoter:q(n.authorizedVoter.toBuffer()),authorizedWithdrawer:q(n.authorizedWithdrawer.toBuffer()),commission:n.commission}}),a={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:je,isSigner:!1,isWritable:!1},{pubkey:We,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:i};return new Be(a)}},{key:"createAccount",value:function(e){var t=new Te;return t.add(ot.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.votePubkey,lamports:e.lamports,space:this.space,programId:this.programId})),t.add(this.initializeAccount({votePubkey:e.votePubkey,nodePubkey:e.voteInit.nodePubkey,voteInit:e.voteInit}))}},{key:"authorize",value:function(e){var t=e.votePubkey,r=e.authorizedPubkey,n=e.newAuthorizedPubkey,i=e.voteAuthorizationType,a=Xe(Xn.Authorize,{newAuthorized:q(n.toBuffer()),voteAuthorizationType:i.index}),o=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:We,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return(new Te).add({keys:o,programId:this.programId,data:a})}},{key:"authorizeWithSeed",value:function(e){var t=e.currentAuthorityDerivedKeyBasePubkey,r=e.currentAuthorityDerivedKeyOwnerPubkey,n=e.currentAuthorityDerivedKeySeed,i=e.newAuthorizedPubkey,a=e.voteAuthorizationType,o=e.votePubkey,s=Xe(Xn.AuthorizeWithSeed,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:q(r.toBuffer()),currentAuthorityDerivedKeySeed:n,newAuthorized:q(i.toBuffer()),voteAuthorizationType:a.index}}),u=[{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:We,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!0,isWritable:!1}];return(new Te).add({keys:u,programId:this.programId,data:s})}},{key:"withdraw",value:function(e){var t=e.votePubkey,r=e.authorizedWithdrawerPubkey,n=e.lamports,i=e.toPubkey,a=Xe(Xn.Withdraw,{lamports:n}),o=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return(new Te).add({keys:o,programId:this.programId,data:a})}},{key:"safeWithdraw",value:function(t,r,n){if(t.lamports>r-n)throw new Error("Withdraw will leave vote account with insuffcient funds.");return e.withdraw(t)}}]),e}();$n.programId=new Y("Vote111111111111111111111111111111111111111"),$n.space=3731;var Qn=new Y("Va1idator1nfo111111111111111111111111111111"),ei=(0,A.dt)({name:(0,A.Z_)(),website:(0,A.jt)((0,A.Z_)()),details:(0,A.jt)((0,A.Z_)()),keybaseUsername:(0,A.jt)((0,A.Z_)())}),ti=function(){function e(t,r){(0,n.Z)(this,e),this.key=void 0,this.info=void 0,this.key=t,this.info=r}return(0,i.Z)(e,null,[{key:"fromConfigData",value:function(t){var r=(0,S.Z)(t);if(2!==pe(r))return null;for(var n=[],i=0;i<2;i++){var o=new Y(r.slice(0,F)),s=1===(r=r.slice(F)).slice(0,1)[0];r=r.slice(1),n.push({publicKey:o,isSigner:s})}if(n[0].publicKey.equals(Qn)&&n[1].isSigner){var u=he().decode(a.Buffer.from(r)),c=JSON.parse(u);return(0,A.hu)(c,ei),new e(n[1].publicKey,c)}return null}}]),e}(),ri=new Y("Vote111111111111111111111111111111111111111"),ni=m.n_([le("nodePubkey"),le("authorizedWithdrawer"),m.u8("commission"),m._O(),m.A9(m.n_([m._O("slot"),m.Jq("confirmationCount")]),m.cv(m.Jq(),-8),"votes"),m.u8("rootSlotValid"),m._O("rootSlot"),m._O(),m.A9(m.n_([m._O("epoch"),le("authorizedVoter")]),m.cv(m.Jq(),-8),"authorizedVoters"),m.n_([m.A9(m.n_([le("authorizedPubkey"),m._O("epochOfLastAuthorizedSwitch"),m._O("targetEpoch")]),32,"buf"),m._O("idx"),m.u8("isEmpty")],"priorVoters"),m._O(),m.A9(m.n_([m._O("epoch"),m._O("credits"),m._O("prevCredits")]),m.cv(m.Jq(),-8),"epochCredits"),m.n_([m._O("slot"),m._O("timestamp")],"lastTimestamp")]),ii=function(){function e(t){(0,n.Z)(this,e),this.nodePubkey=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.rootSlot=void 0,this.votes=void 0,this.authorizedVoters=void 0,this.priorVoters=void 0,this.epochCredits=void 0,this.lastTimestamp=void 0,this.nodePubkey=t.nodePubkey,this.authorizedWithdrawer=t.authorizedWithdrawer,this.commission=t.commission,this.rootSlot=t.rootSlot,this.votes=t.votes,this.authorizedVoters=t.authorizedVoters,this.priorVoters=t.priorVoters,this.epochCredits=t.epochCredits,this.lastTimestamp=t.lastTimestamp}return(0,i.Z)(e,null,[{key:"fromAccountData",value:function(t){var r=ni.decode(q(t),4),n=r.rootSlot;return r.rootSlotValid||(n=null),new e({nodePubkey:new Y(r.nodePubkey),authorizedWithdrawer:new Y(r.authorizedWithdrawer),commission:r.commission,votes:r.votes,rootSlot:n,authorizedVoters:r.authorizedVoters.map(ai),priorVoters:si(r.priorVoters),epochCredits:r.epochCredits,lastTimestamp:r.lastTimestamp})}}]),e}();function ai(e){var t=e.authorizedVoter;return{epoch:e.epoch,authorizedVoter:new Y(t)}}function oi(e){var t=e.authorizedPubkey,r=e.epochOfLastAuthorizedSwitch,n=e.targetEpoch;return{authorizedPubkey:new Y(t),epochOfLastAuthorizedSwitch:r,targetEpoch:n}}function si(e){var t=e.buf,r=e.idx;return e.isEmpty?[]:[].concat((0,S.Z)(t.slice(r+1).map(oi)),(0,S.Z)(t.slice(0,r).map(oi)))}var ui={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function ci(e,t){var r=!1===t?"http":"https";if(!e)return ui[r].devnet;var n=ui[r][e];if(!n)throw new Error("Unknown ".concat(r," cluster: ").concat(e));return n}function li(e,t,r,n){return di.apply(this,arguments)}function di(){return(di=(0,s.Z)(h().mark((function e(t,r,n,i){var a,o,s,u,c,l,d;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n&&Object.prototype.hasOwnProperty.call(n,"lastValidBlockHeight")||n&&Object.prototype.hasOwnProperty.call(n,"nonceValue")?(a=n,o=i):o=n,s=o&&{skipPreflight:o.skipPreflight,preflightCommitment:o.preflightCommitment||o.commitment,minContextSlot:o.minContextSlot},e.next=4,t.sendRawTransaction(r,s);case 4:return u=e.sent,c=o&&o.commitment,l=a?t.confirmTransaction(a,c):t.confirmTransaction(u,c),e.next=9,l;case 9:if(!(d=e.sent.value).err){e.next=12;break}throw new Error("Raw transaction ".concat(u," failed (").concat(JSON.stringify(d),")"));case 12:return e.abrupt("return",u);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var hi=1e9}}]);